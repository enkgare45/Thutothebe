/* :asset_packager_compatibility, 'config/asset_packages.yml' @ 1500067170 */
/* public/javascripts/4gen.js @ 1500067170 */
init_4gen=function(){var t;"undefined"!=typeof jQuery&&(t=jQuery);var e,n=3,i=8,r="/images/4gen/trans_1x1.gif",o=30,s=315,a=1,c=2,l=3,u=12;window.console||(window.console={log:function(){}});var d=function(){function d(){}function h(t,e){t.prototype.addEvent=d.prototype.addEvent,t.prototype.removeEvent=d.prototype.removeEvent,t.prototype.fireEvent=d.prototype.fireEvent,t.prototype.initEventHelper=d.prototype.initEventHelper,t.prototype.possibleEvents=e}function p(t,e,n,i,r,o){this.id=t,this.shortstyle=e,this.family=n,this.fallback=i,this.weight=r,this.style=o}function f(t){this.fonts=[],this.docManager=t,this._cssRuleQueue=[],this._fontLoadQueue=[]}function _(t,e){this.pages=[],this.loaded=!1,this.fonts={},this.numFonts=0,this.fontLoader=e,this.groupNum=t||0}function m(t){for(var e in this._defaultParams)this._defaultParams.hasOwnProperty(e)&&(this[e]=t[e]||this._defaultParams[e]);for(var n=0;n<this._requiredParams.length;n++){var i=this._requiredParams[n];if(!this[i])throw"Missing required Page param: "+i}if(!this.contentUrl&&!this.innerPageElem)throw"Must initialize a page with either a contentUrl or innerPageElem element";if(this.containerElem.boundToPageObj===!0)throw"Container Elem is already bound to a page.  We shouldn't get here";this.containerElem.boundToPageObj=!0,this._targetWidth=null,this._innerPageVisible=!!this.innerPageElem,this._imagesTurnedOn=!1,this.boundingRect=null,this.isVisible=!1,this.displayDirty=!0,this.displayOn=null,this.loadHasStarted=!!this.innerPageElem}function g(){this.initEventHelper(),this.viewRect=null,this.enabled=!1;var t=this;this._scrollCallback=function(){t._eventHandler("scroll")},this._resizeCallback=function(){t._eventHandler("resize")}}function v(){}function b(e,n,i){"undefined"==typeof t&&"undefined"!=typeof scribd&&x.setJQuery(scribd.jQuery),t("html, body").animate({scrollTop:t(e).offset().top},{queue:!1,duration:n,easing:"linear",complete:i})}function y(){this._name="book",this.currentPageId=null;var t=this;this._fullscreenResizedCallback=function(e){t._fullscreenResized(e)}}function w(){this._name="slideshow",this.currentPageId=null;var t=this;this._fullscreenResizedCallback=function(e){t._fullscreenResized(e)}}function k(){this._name="scroll";var t=this;this._verticalPositionChangeCallback=function(){t.checkAndUpdateVisiblePages()},this._fullscreenResizedCallback=function(){t._fullscreenResized()}}function x(e,n,i){this.options=i||{},this.options.extrasWidth=this.options.extrasWidth||s,this.defaultViewMode=e||"scroll",this.mobile=n||!1,t&&(this.view_manager_deferred=t.Deferred()),this.initEventHelper(),this.pages={},this._pageWidths=null,this._fontLoader=new f(this),this.viewManagers={scroll:new k,slideshow:new w,book:new y},this.viewportManager=new g,this._currentFontAggregatorHostIdx=0,this.visiblePages=[],this.firstVisiblePage=null,this.lastVisiblePage=null,this.currentFontGroup=new _(0,this._fontLoader),this.isScrolling=!1,this._scrollingCount=0}function S(t,e,n){return Math.min(n,Math.max(e,t))}function C(t){return Math.floor(100*t)/100}var T={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decode:function(t){var e,n,i,r,o,s,a,c="",l=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<t.length;)r=this._keyStr.indexOf(t.charAt(l++)),o=this._keyStr.indexOf(t.charAt(l++)),s=this._keyStr.indexOf(t.charAt(l++)),a=this._keyStr.indexOf(t.charAt(l++)),e=r<<2|o>>4,n=(15&o)<<4|s>>2,i=(3&s)<<6|a,c+=String.fromCharCode(e),64!=s&&(c+=String.fromCharCode(n)),64!=a&&(c+=String.fromCharCode(i));return c=T._utf8_decode(c)},_utf8_decode:function(t){for(var e="",n=0,i=0,r=0;n<t.length;)i=t.charCodeAt(n),128>i?(e+=String.fromCharCode(i),n++):i>191&&224>i?(r=t.charCodeAt(n+1),e+=String.fromCharCode((31&i)<<6|63&r),n+=2):(r=t.charCodeAt(n+1),c3=t.charCodeAt(n+2),e+=String.fromCharCode((15&i)<<12|(63&r)<<6|63&c3),n+=3);return e}};d.prototype.initEventHelper=function(){this.eventListenerEnabled=!0,this.eventListeners={};for(var t=0;t<this.possibleEvents.length;t++)this.eventListeners[this.possibleEvents[t]]={}},d.prototype.addEvent=function(t,e){if(!this.eventListeners[t])throw t+" is not a valid type of event";this.eventListeners[t].next_uid||(this.eventListeners[t].next_uid=1),e._event_listener_uid||(e._event_listener_uid=this.eventListeners[t].next_uid,this.eventListeners[t].next_uid++),this.eventListeners[t][e._event_listener_uid]=e},d.prototype.removeEvent=function(t,e){delete this.eventListeners[t][e._event_listener_uid]},d.prototype.fireEvent=function(t){function e(t){t.apply(o,i)}if(this.eventListenerEnabled){var n=this.eventListeners[t],i=[];if(arguments.length>1){i[arguments.length-2]=null;for(var r=1;r<arguments.length;r++)i[r-1]=arguments[r]}var o=this;for(var s in n)"next_uid"!=s&&n.hasOwnProperty(s)&&e(n[s])}};var E="font_preload_bed",D=function(){return document.styleSheets[0]&&!document.styleSheets[0].insertRule},M=function(t){return t%1==0},N=function(t,e){if(D()){var n=t.innerHTML;t.href=e,t.innerHTML!=n&&(t.innerHTML=n)}else t.href=e},I=function(){var t=navigator.userAgent.toLowerCase();return t.search("android 2.2")>-1}(),P=function(){var t=navigator.userAgent.toLowerCase();return t.search("mobile")>-1&&t.search("safari")>-1&&!I}(),R=navigator.userAgent.indexOf("AppleWebKit/")>-1;e=function(){return D()?a:P?c:c}(),D()&&(i=5,n=2),I&&(i=1,n=1),p.prototype.eotCssRule=function(t){var e="src: url("+t+this.family+".eot); font-family: "+this.family+"; font-weight: "+this.weight+"; font-style: "+this.style;return"@font-face {"+e+"}"},p.prototype.ttfCssRule=function(t){var e="src: url("+t+this.family+".ttf) format('truetype'); font-family: "+this.family+"; font-weight: "+this.weight+"; font-style: "+this.style;return"@font-face {"+e+"}"},p.prototype.svgCssRule=function(t){var e="src: url("+t+"#"+this.family+") format('svg'); font-family: "+this.family+"; font-weight: "+this.weight+"; font-style: "+this.style;return"@font-face {"+e+"}"},p.prototype.createPreloadElem=function(){return"<span style='font-family: "+this.family+"'>scribd.</span> "},f.prototype._makeNewStyleBlock=function(){var t=document.createElement("style");window.createPopup||t.appendChild(document.createTextNode(""));var e=document.getElementsByTagName("head")[0];return e.appendChild(t),t},f.prototype._insertCssRule=function(t){this._cssRuleQueue.push(t)},f.prototype._flushCssRuleQueue=function(t){if(this._cssRuleQueue.length>0){var e=t&&document.getElementById(t)||this._makeNewStyleBlock(),n=this._cssRuleQueue.join("\n");D()?e.styleSheet.cssText=n:window.createPopup?e.innerHTML=n:e.appendChild(document.createTextNode(n)),this._cssRuleQueue=[]}},f.prototype.getFontAggregatorHostForFonts=function(t){for(var n=[],i=0;i<t.length;i++)n.push(t[i].shortstyle+t[i].id);n.sort();var r=this.docManager.nextFontAggregatorHost()+"/"+this.docManager.assetPrefix+"/"+n.join(",")+"/"+u+"/";switch(e){case a:break;case c:I||(r+="ttfs.css");break;case l:r+="fonts.svg"}return r},f.prototype._addTTFRules=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];this._insertCssRule(i.ttfCssRule(e))}},f.prototype._addSVGRules=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];this._insertCssRule(i.svgCssRule(e))}},f.prototype._addEOTRules=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];this._insertCssRule(i.eotCssRule(e))}},f.prototype._nextPreloadId=function(){this._preloadId||(this._preloadId=0);var t="preload_bed"+this._preloadId;return this._preloadId+=1,t},f.prototype._addCSSWebkit=function(t,e){function n(){{var t=document.createElement("div");i._nextPreloadId()}t.innerHTML=s;var n=document.getElementById(E),o=window.setInterval(function(){r.contentDocument.styleSheets.length>0&&(window.clearInterval(o),r.contentDocument.body.getBoundingClientRect(),n.appendChild(t),window.setTimeout(function(){r.contentDocument.body.getBoundingClientRect(),i._addCSSLink(e)},500))},0)}var i=this,r=document.createElement("iframe"),o=this._nextPreloadId();r.id=o;for(var s="",a=0;a<t.length;a++){var c=t[a];s+=c.createPreloadElem()}this._makeNewStyleBlock();r.addEventListener("load",function(){n()},!1),r.style.display="none",document.body.appendChild(r),r.contentDocument.body.innerHTML=s;var l=r.contentDocument.createElement("link");l.href=e,l.rel="stylesheet",l.type="text/css",l.media="screen";var u=r.contentDocument.getElementsByTagName("head")[0];u.appendChild(l)},f.prototype._addCSSLink=function(t){var e=document.createElement("link");e.href=t,e.rel="stylesheet",e.type="text/css";var n=document.getElementsByTagName("head")[0];n.appendChild(e)},f.prototype.flushFontQueue=function(){if(0!==this._fontLoadQueue.length&&"rasterize"!=this.docManager.displayType){var t=this._fontLoadQueue;this._fontLoadQueue=[];var n=this.getFontAggregatorHostForFonts(t);switch(e){case a:this._addEOTRules(t,n);break;case c:I?this._addTTFRules(t,n):R?this._addCSSWebkit(t,n):this._addCSSLink(n);break;case l:this._addSVGRules(t,n)}this._flushCssRuleQueue()}},f.prototype.addFontToQueue=function(t){var e=this.fonts[t];e._loadQueued||(e._loadQueued=!0,this._fontLoadQueue.push(e))},f.prototype.addFont=function(t,e,n,i,r,o){var s=new p(t,e,n,i,r,o);this.fonts[t]=s},f.prototype.setNumFonts=function(t){for(var e=0;t>e;e++)this.fonts[e]=new p(e,"","ff"+e,"sans-serif","normal","normal")},f.prototype._initHidersCSS=function(){for(var t=[],e=0;e<this.fonts.length;e++)t.push("."+this.fonts[e].family);this._insertCssRule(t.join(", ")+" {display: none;}\n")},f.prototype._initFamilyCSS=function(){for(var t=0;t<this.fonts.length;t++){var e=this.fonts[t].family,n=this.fonts[t].fallback,i=this.fonts[t].weight,r=this.fonts[t].style,o="div."+e+" span";"undefined"!=typeof scribd&&"undefined"!=typeof scribd.embed_div_id&&(o="#"+scribd.embed_div_id+" "+o),this._insertCssRule(D()?o+" {font-family: "+e+" !important;\n}":o+" {font-family: "+e+", "+n+"; font-weight: "+i+"; font-style: "+r+";\n}")}},f.prototype.initStyles=function(){if("rasterize"!=this.docManager.displayType){switch(this._initFamilyCSS(),e){case a:break;case c:I||this._initHidersCSS();break;case l:}this._flushCssRuleQueue("preload_styler")}},f.prototype.setupTestElements=function(){if(e==c&&!R&&"rasterize"!=this.docManager.displayType){for(var t="",n=0;n<this.fonts.length;n++){var i=this.fonts[n];t+=i.createPreloadElem()}var r=document.getElementById(E);r.innerHTML=t,document.body.appendChild(r),this._insertCssRule("#"+E+" span {display: block; visibility: hidden}"),this._flushCssRuleQueue()}},_.prototype.addPage=function(t){for(var e=0;e<t.fonts.length;e++){var n=t.fonts[e];void 0===this.fonts[n]&&(this.fonts[n]=!0,this.numFonts+=1)}this.pages.push(t)},_.prototype.isFull=function(){var t=this.pages.length,n=this.groupNum,r=this.numFonts;return e==a?this.hasLoaded||r>50||r>=20&&(0===n&&t>=i+3||t>=15):e==l||I?this.hasLoaded||r>=5&&t>=i:this.hasLoaded||r>100||r>=20&&(0===n&&t>=i+3||t>=100)},_.prototype.load=function(t){function e(){for(var t in n.fonts)n.fonts.hasOwnProperty(t)&&n.fontLoader.addFontToQueue(t);n.fontLoader.flushFontQueue()}if(!this.hasLoaded){this.hasLoaded=!0;var n=this;t?window.setTimeout(function(){e()},t):e()}},_.prototype.newNextGroup=function(){return new _(this.groupNum+1,this.fontLoader)};var A=1,O=2,$=3,j=4,L=function(){return void 0!==document.documentElement.style.WebkitTransform?A:void 0!==document.documentElement.style.MozTransform?O:void 0!==document.documentElement.style.OTransform?j:$}();m.prototype._defaultParams={containerElem:null,innerPageElem:null,contentUrl:null,origWidth:null,origHeight:null,fonts:null,docManager:null,pageNum:null},m.prototype._requiredParams=["origWidth","origHeight","fonts","docManager","containerElem","pageNum"],m.prototype._updateBoundingRect=function(){var t,e,n,i;if(this.containerElem.getBoundingClientRect&&this.docManager.viewportManager.viewRect){var r=this.containerElem.getBoundingClientRect(),o=this.docManager.viewportManager.viewRect;e=r.left+o.left,t=r.top+o.top,o.offsetX&&(e-=o.offsetX),o.offsetY&&(t-=o.offsetY),n=r.right-r.left,i=r.bottom-r.top,this.boundingRect={left:e,top:t,bottom:t+i,right:e+n,width:n,height:i}}else t=this.containerElem.offsetTop,e=this.containerElem.offsetLeft,n=this.containerElem.offsetWidth,i=this.containerElem.offsetHeight,this.boundingRect={left:e,top:t,bottom:t+i,right:e+n,width:n,height:i}},m.prototype._setContainerContents=function(e){var n=/<noscript *><img[^<>]*\/><\/noscript *>/g,i=t(e.replace(n,""))[0];this.containerElem.appendChild(i);this.innerPageElem=i,this.turnOnLinks(),this.turnOnImages(),this.fixSVGFonts(),this.displayDirty=!0,this.displayOn?this.display():this.hide()},m.prototype.fixSVGFonts=function(){if(this._svgFontsFixed)throw"Already fixed the svg fonts";if(this.innerPageElem){if(P){var t=function(e){if(e.nodeType==document.TEXT_NODE){var n=e.textContent.search(/[  \n][^ \n ]/);n>=0&&t(e.splitText(n+1))}else for(var i=e.childNodes,r=0;r<i.length;r++)t(i[r])},e=function(t){for(var n=t.childNodes,i=0;i<n.length;i++){var r=n[i];if(r.nodeType==document.ELEMENT_NODE)e(r);else{var o=n[i+1];o&&"#text"==o.nodeName&&t.insertBefore(document.createElement("span"),o)}}};t(this.innerPageElem),e(this.innerPageElem)}this._svgFontsFixed=!0}},m.prototype.imagePageContent=function(t){return str="<img src='"+t+"'></img>"},m.prototype.load=function(){if(this.currentlyLoading=!0,this.loadHasStarted=!0,this.innerPageElem)throw"We already have loaded this page, but it looks like you called loadPage again";this.loadFonts();var e="page"+this.pageNum+"_callback";if(window[e])try{delete window[e]}catch(n){window[e]=void 0}if("rasterize"==this.docManager.displayType)return delete this.currentlyLoading,void this._setContainerContents(this.imagePageContent(this.contentUrl));var i=document.createElement("script"),r=this;window[e]=function(n){document.body.removeChild(i);var o=n[0];delete r.currentlyLoading,r._setContainerContents(o),"undefined"!=typeof t&&($container=t("#"+r.containerElem.id),$container.hasClass("blurred_page")&&r.docManager.doDynamicBlurring(r.containerElem.id)),r.docManager.fireEvent("pageLoaded",r.containerElem);try{delete window[e]}catch(s){window[e]=void 0}},i.src=this.contentUrl,i.type="text/javascript",i.charset="UTF-8",document.body.appendChild(i)},m.prototype.remove=function(){if(this.innerPageElem){var t=this.innerPageElem.parentNode;t.removeChild(this.innerPageElem),delete this.innerPageElem,delete this.currentLoading,delete this.loadHasStarted,this._linksTurnedOn=!1,this._imagesTurnedOn=!1,this._svgFontsFixed=!1}},m.prototype.display=function(t,e){if((!this.displayOn||this.displayDirty)&&(this.displayOn=!0,!this.currentlyLoading)){if(!this.innerPageElem)return this.loadHasStarted?void 0:t?void this.load():void 0;this.displayDirty=!1,e||(this._linksTurnedOn||this.turnOnLinks(),this._imagesTurnedOn||this.turnOnImages(),this._svgFontsFixed||this.fixSVGFonts()),this.loadFonts(),this._innerPageVisible||(this.containerElem.className=this.containerElem.className.replace(/placeholder|not_visible/g,""),this._innerPageVisible=!0,e||(this._fitContentsToWidth(),this.innerPageElem.style.display="block"))}},m.prototype.hide=function(){(this.displayOn||this.displayDirty)&&(this.displayOn=!1,this.innerPageElem&&(this.displayDirty=!1,this.containerElem.className=this.containerElem.className+" not_visible",this._innerPageVisible=!1,this.innerPageElem.style.display="none"))},m.prototype.setLoadFontGroup=function(t){t.addPage(this),this.loadFontGroup=t},m.prototype.loadFonts=function(){this.loadFontGroup.load()};var F=!!(document.all&&/msie 6./i.test(navigator.appVersion)&&window.ActiveXObject);return m.prototype._setZoomScale=function(t){var e=this.innerPageElem;switch(L){case A:e.style.WebkitTransform="scale("+t+")",e.style.WebkitTransformOrigin="top left";break;case O:e.style.MozTransform="scale("+t+")",e.style.MozTransformOrigin="top left";break;case j:e.style.OTransform="scale("+t+")",e.style.OTransformOrigin="top left";break;case $:if(e.originalZoom||(e.originalZoom="normal"==e.currentStyle.zoom?1:parseFloat(e.currentStyle.zoom)/100,F&&!this.docManager._isEmbed&&(e.originalZoom*=1.35)),e.style.zoom=e.originalZoom*t*100+"%",F){var n=this.innerPageElem;setTimeout(function(){n.style.marginLeft=""===n.style.marginLeft?0:""},500)}break;default:throw"Unknown scale method "+L}},m.prototype._fitContentsToWidth=function(){if(this._targetWidth&&this.innerPageElem&&this._innerPageVisible){var t=this._targetWidth/this.origWidth;this._setZoomScale(t),this._targetWidth=null}},m.prototype.setWidth=function(t){var e=Math.ceil(t/this.origWidth*this.origHeight);this.containerElem.style.width=t+"px",this.containerElem.style.height=e+"px",this._targetWidth=t,this._fitContentsToWidth()},m.prototype.setBounds=function(t,e){this.origWidth/this.origHeight>t/e?e=Math.ceil(t/this.origWidth*this.origHeight):t=Math.ceil(e/this.origHeight*this.origWidth),this.containerElem.style.width=t+"px",this.containerElem.style.height=e+"px",this._targetWidth=t,this._fitContentsToWidth()},m.prototype.turnOnImages=function(){if(!this.innerPageElem)throw"Can't turn on images for a page that's not loaded";if(this._imagesTurnedOn)throw"Images have already been turned on for this document";this._imagesTurnedOn=!0;for(var t=this.innerPageElem.getElementsByTagName("img"),e=0;e<t.length;e++){var n=t[e];if(n.className.toLowerCase().search("absimg")>-1&&!n.src){var i=this.docManager.subImageSrc(n.getAttribute("orig"));this.docManager.enablePNGHack?(n.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+i+"', sizingMethod='scale')",n.src=r):n.src=i,n.removeAttribute("orig"),n.style.display="block"}}},m.prototype.turnOnLinks=function(){if(!this.innerPageElem)throw"Can't turn on links for a page that's not loaded";if(this._linksTurnedOn)throw"Links have already been turned on for this document";this._linksTurnedOn=!0;for(var t=this.docManager,e=function(e){return function(){t.gotoPage(e.substring(4))}},n=this.innerPageElem.getElementsByTagName("a"),i=0;i<n.length;i++){var r=n[i];if(r.className.toLowerCase().search("ll")>-1&&!r.href){var o=r.getAttribute("orig");if(o){var s=T.decode(o).replace(/^j[\W]*a[\W]*v[\W]*a[\W]*s[\W]*c[\W]*r[\W]*i[\W]*p[\W]*t[\W]*:|^f[\W]*i[\W]*l[\W]*e[\W]*:/gi,"");s.search(/^page/)>-1?r.onclick=e(s):(s.search(/^mailto:/)>=0||s.search(/^(http|ftp)/)<0&&(s="http://"+s),r.target="_blank",N(r,s),r.rel="nofollow")}}}},h(g,["vertical","horizontal","either","resize"]),g.prototype._makeViewRect=function(){var t=this.container,e=document.documentElement,n=t.scrollTop||t.scrollY||t.pageYOffset||e.scrollTop,i=t.scrollLeft||t.scrollX||t.pageXOffset||e.scrollLeft,r=t.clientWidth||t.innerWidth||e.clientWidth,o=t.clientHeight||t.innerHeight||e.clientHeight,s=i+r,a=n+o,c={top:n,left:i,right:s,bottom:a,width:r,height:o};if(this.container!=window){var l=this.container.getBoundingClientRect&&this.container.getBoundingClientRect();l&&(c.offsetX=l.left,c.offsetY=l.top)}return c},g.prototype._updateViewRect=function(){var t=this.viewRect;this.viewRect=this._makeViewRect();var e=!t||t.left!=this.viewRect.left||t.width!=this.viewRect.width,n=!t||t.top!=this.viewRect.top||t.height!=this.viewRect.height;return{xChanged:e,yChanged:n}},g.prototype._eventHandler=function(t){var e=this._updateViewRect();"resize"!=t&&"both"!=t||!e.xChanged&&!e.yChanged||this.fireEvent("resize",this.viewRect),(e.xChanged||e.yChanged)&&this.fireEvent("either",this.viewRect),e.xChanged&&this.fireEvent("horizontal",this.viewRect),e.yChanged&&this.fireEvent("vertical",this.viewRect)},g.prototype.enable=function(){if(this.enabled)throw"ViewportManager has already been enabled";if(this.enabled=!0,this.container=x.scrollParent||window,this._eventHandler("both"),window.addEventListener){this.container.addEventListener("resize",this._resizeCallback,!1);var t=x.scrollParent?this.container:window.document;t.addEventListener("scroll",this._scrollCallback,!1)}else window.attachEvent&&(this.container.attachEvent("onresize",this._resizeCallback),this.container.attachEvent("onscroll",this._scrollCallback))},g.prototype.disable=function(){if(!this.enabled)throw"ViewportManager has already been disabled";this.enabled=!1,this.container.removeEventListener?(window.removeEventListener("resize",this._resizeCallback,!1),this.container.removeEventListener("scroll",this._scrollCallback,!1)):window.detatchEvent&&(window.detatchEvent("onresize",this._resizeCallback),this.container.detatchEvent("onscroll",this._scrollCallback))},v.prototype.name=function(){return this._name},v.prototype.register=function(t,e){if(this.registered)throw"This ViewManager is already registered";this.registered=!0,this.documentManager=t,this.viewportManager=e,this._currentPageWidth=defaultViewWidth,this._currentZoomMultiplier=1,this._updatePageWidths();var n=this.documentManager.firstVisiblePage;this._register(t,e),n&&this.documentManager.gotoPage(n.pageNum,{}),t.view_manager_deferred&&t.view_manager_deferred.resolve(t)},v.prototype._zoomedPageWidth=function(){return this._currentPageWidth*this._currentZoomMultiplier},v.prototype._updatePageWidths=function(){this.documentManager.setPageWidths(this._zoomedPageWidth())},v.prototype.isTopPageInView=function(){return!0},v.prototype._register=function(){},v.prototype.unregister=function(){if(!this.registered)throw"This ViewManager is already unregistered";this.isFullscreen&&this.exitFullscreen(),this._checkBodyWidth(),this._unregister(),this.registered=!1,delete this.documentManager,delete this.viewportManager},v.prototype._unregister=function(){},v.prototype._pagingStep=function(){return 1},v.prototype.gotoPage=function(t,e){if(!this.registered)throw"ViewManager must be registerd to call gotoPage";this._gotoPage(t,e)},v.prototype._gotoPage=function(){},v.prototype._fireHideExtras=function(){this.documentManager._fireHideExtras(),this._extrasHidden=!0},v.prototype._fireShowExtras=function(){this.documentManager._fireShowExtras(),this._extrasHidden=!1},v.prototype.enterFullscreen=function(){if(this.isFullscreen)throw"Fullscreen is already set";this._checkBodyWidth(),this.viewportManager.addEvent("resize",this._fullscreenResizedCallback),this._fireHideExtras(),this.resetZoom(),this._enterFullscreen(),this._fullscreenResized(this.viewportManager.viewRect),this._currentPageWidth=this.viewportManager.viewRect.width,this.isFullscreen=!0;var t=this.documentManager.firstVisiblePage;t&&this.documentManager.gotoPage(t.pageNum,{}),this.documentManager._fireEnteredFullscreen()},v.prototype.exitFullscreen=function(){if(!this.isFullscreen)throw"Fullscreen is not set";this.viewportManager.removeEvent("resize",this._fullscreenResizedCallback),this._fireShowExtras(),this.resetZoom(),this._exitFullscreen(),this.isFullscreen=!1;var t=this.documentManager.firstVisiblePage;t&&this.documentManager.gotoPage(t.pageNum,{}),this.documentManager._fireExitedFullscreen()},v.prototype._viewBarWidth=function(){return this._extrasHidden?0:this.documentManager.options.extrasWidth},v.prototype._enterFullscreen=function(){},v.prototype._exitFullscreen=function(){},v.prototype._fullscreenResized=function(){},v.prototype._scrollWithZoom=function(t,e){window.scrollTo(0,t.top*e)},v.prototype.zoom=function(t){var e=this.viewportManager.viewRect;e&&(this._currentZoomMultiplier*=t,this._checkBodyWidth(),this._updatePageWidths(),this.documentManager.setIsScrolling(!0),this._scrollWithZoom(e,t),this._zoomed(),this.documentManager.setIsScrolling(!1),this.documentManager._fireZoomed(t))},v.prototype._zoomed=function(){},v.prototype.resetZoom=function(){this._currentZoomMultiplier=1,this._checkBodyWidth(),this._updatePageWidths(),this._zoomed()},v.prototype._checkBodyWidth=function(){if(!x.scrollParent&&0!=x.updateBodyWidth){var t=document.documentElement.clientWidth,e=this._zoomedPageWidth()+this._viewBarWidth()+10;globalHeader=document.getElementById("global_header"),e>t?(document.body.style.width=e+"px",globalHeader&&(globalHeader.style.width=t+"px")):(document.body.style.width="100%",globalHeader&&(globalHeader.style.width="100%"))}},y.prototype=new v,y.prototype._register=function(){this._prepareDisplay()},y.prototype._unregister=function(){for(var e in this.documentManager.pages)if(this.documentManager.pages.hasOwnProperty(e)){var n=this.documentManager.pages[e];t(n.containerElem).removeClass("book_view"),n.containerElem.style.display=""}},y.prototype._prepareDisplay=function(){for(var e in this.documentManager.pages)if(this.documentManager.pages.hasOwnProperty(e)){var n=this.documentManager.pages[e];t(n.containerElem).addClass("book_view"),n.containerElem.style.display="none",n.hide()}this.documentManager.setPageMissingModulesVisible(!1),this.documentManager.gotoPage(this.documentManager.currentPageNum()||1)},y.prototype._zoomed=function(){this.documentManager.pages[this.currentPageId]},y.prototype._updatePageWidths=function(){this.documentManager.setPageWidths(this._zoomedPageWidth()/2)},y.prototype._pagingStep=function(){return 2},y.prototype._showPage=function(t){var e=this.documentManager.pages[t];e&&(e.isVisible=!0,e.display(!0),e.containerElem.style.display="")},y.prototype._hidePage=function(t){var e=this.documentManager.pages[t];e&&(e.isVisible=!1,e.containerElem.style.display="none",e.hide())},y.prototype._gotoPage=function(t){t=parseInt(t,10),t%2==1&&(t-=1);var e=null,n=null;"number"==typeof this.currentPageId&&(this._hidePage(this.currentPageId),this._hidePage(this.currentPageId+1)),e=this.documentManager.pages[t],n=this.documentManager.pages[t+1],(e||n)&&(this.currentPageId=t,this.isFullscreen&&this._setPageBounds(this.viewportManager.viewRect),this._showPage(t),this._showPage(t+1),this.documentManager.visiblePagesChanged())},y.prototype._setWidth=function(t){this._currentPageWidth=t,this.documentManager.setPageWidths(t)},y.prototype._fullscreenResized=function(t){this._setWidth(t.width-o)},y.prototype._enterFullscreen=function(){this._previousPageWidth=this._currentPageWidth||defaultViewWidth,b(this.documentManager.pages[this.currentPageId].containerElem,300)},y.prototype._exitFullscreen=function(){this._setWidth(defaultViewWidth),this._checkBodyWidth()},w.prototype=new v,w.prototype._register=function(){this._prepareDisplay();var t=document.getElementById("scroll_preventer");t&&(t.style.overflow="hidden",t.style.height="100%")},w.prototype._unregister=function(){var t=document.getElementById("scroll_preventer");t&&(t.style.overflow="visible",t.style.height="auto")},w.prototype._prepareDisplay=function(){for(var t in this.documentManager.pages)if(this.documentManager.pages.hasOwnProperty(t)){var e=this.documentManager.pages[t];e.containerElem.style.display="none",e.hide()}this.documentManager.setPageMissingModulesVisible(!1),this.documentManager.gotoPage(this.documentManager.currentPageNum()||1)},w.prototype._setPageBounds=function(t){var e=this.documentManager.pages[this.currentPageId];e&&e.setBounds(t.width,t.height)},w.prototype._gotoPage=function(t){if(this.documentManager.pages.hasOwnProperty(t)){var e;this.currentPageId&&(e=this.documentManager.pages[this.currentPageId],e&&(e.isVisible=!1,e.containerElem.style.display="none",e.hide())),this.currentPageId=t,e=this.documentManager.pages[t],this.isFullscreen&&this._setPageBounds(this.viewportManager.viewRect),e.isVisible=!0,e.display(!0),e.containerElem.style.display="",e._updateBoundingRect(),this.documentManager.visiblePagesChanged()}},w.prototype._setWidth=function(t){this._currentPageWidth=t,this.documentManager.setPageWidths(t)},w.prototype._fullscreenResized=function(t){this._setPageBounds(t)},w.prototype._enterFullscreen=function(){this._previousPageWidth=this._currentPageWidth||defaultViewWidth,b(this.documentManager.pages[this.currentPageId].containerElem,300)},w.prototype._exitFullscreen=function(){this._setWidth(defaultViewWidth),this._checkBodyWidth()},k.prototype=new v,k.prototype._updateInViewport=function(t){var e=this.viewportManager.viewRect,n=t.boundingRect,i=t.isVisible;return t.isVisible=e&&n?n.left<e.right&&n.right>e.left&&n.top<e.bottom&&n.bottom>e.top:!1,this.adjacentVisiblePages=2,i!=t.isVisible},k.prototype.checkAndUpdateVisiblePages=function(){var t=!1;for(var e in this.pages)if(this.pages.hasOwnProperty(e)){var n=this.pages[e],i=this._updateInViewport(n);t=t||i}t?this.documentManager.visiblePagesChanged():this.documentManager.scheduleLogPageView(),this._updateDisplayOnPages()},k.prototype._updateDisplayOnPages=function(){if(this.documentManager.firstVisiblePage&&this.documentManager.lastVisiblePage){var t=this.documentManager.firstVisiblePage.pageNum-this.adjacentVisiblePages,e=this.documentManager.lastVisiblePage.pageNum+this.adjacentVisiblePages;for(var n in this.pages)if(this.pages.hasOwnProperty(n)){var i=this.pages[n];i&&(i.pageNum>=t&&i.pageNum<=e?i.display():(i.hide(),this.documentManager.fireEvent("pageHide",i)))}}},k.prototype._zoomed=function(){this.checkAndUpdateVisiblePages()},k.prototype._register=function(t){this.pages=t.pages,this.viewportManager.addEvent("vertical",this._verticalPositionChangeCallback);for(var e in this.pages)if(this.pages.hasOwnProperty(e)){var n=this.documentManager.pages[e];n.containerElem.style.display=""}this.documentManager.setPageMissingModulesVisible(!0),this.documentManager._updatePageBoundingRects(),this.checkAndUpdateVisiblePages()},k.prototype.isTopPageInView=function(){var t=this.documentManager.firstVisiblePage;return t?this.documentManager._expectedFirstPageNum>t.pageNum?!0:t.boundingRect.top+5>=this.viewportManager.viewRect.top:!0},k.prototype._unregister=function(){this.viewportManager.removeEvent("vertical",this._verticalPositionChangeCallback),delete this.pages},k.prototype._gotoPage=function(t,e){if(e=e||{},this.pages.hasOwnProperty(t)){var n=this.documentManager.pages[t];this.documentManager.setIsScrolling(!0);var i=this.documentManager.viewportManager.container;return n._updateBoundingRect(),i==window?scrollTo(n.boundingRect.left,n.boundingRect.top-(e.offset||0)):i.scrollTop=n.boundingRect.top-(e.offset||0),this.documentManager.setIsScrolling(!1),this.documentManager.isScrolling||this.documentManager.visiblePagesChanged(),n.pageNum}},k.prototype._gotoNextPage=function(){this.documentManager.firstVisiblePage&&this.documentManager.gotoPage(this.documentManager.firstVisiblePage.pageNum+1,{direction:1})},k.prototype._gotoPreviousPage=function(){this.documentManager.firstVisiblePage&&this.documentManager.gotoPage(this.documentManager.firstVisiblePage.pageNum-1,{direction:-1})},k.prototype._setWidth=function(t){var e=this.pagePosition();this._currentPageWidth=t,this._updatePageWidths(),this._checkBodyWidth(),this.restorePosition(e)},k.prototype._fullscreenResized=function(){this._setWidth((window.innerWidth||document.documentElement.clientWidth)-o)},k.prototype._enterFullscreen=function(){this._previousPageWidth=this._currentWidth||defaultViewWidth},k.prototype._exitFullscreen=function(){this._setWidth(this._previousPageWidth)},k.prototype.pagePosition=function(){var e=t(this.viewportManager.container);if(e.is(window)){var n=this.documentManager.currentPageNum()||1,i=t("#outer_page_"+n),r=0;return i.length&&(r=(t(window).scrollTop()-i.offset().top)/i.height()),[n,r]}var o=this.documentManager.pages[this.documentManager.currentPageNum()||1],s=e.scrollTop(),a=e.scrollLeft(),c=(s-o.boundingRect.top)/o.boundingRect.height,l=(a-o.boundingRect.left)/o.boundingRect.width;return[o.pageNum,c,l]},k.prototype.restorePosition=function(e){if(!this._disableRestorePosition){var n=t(this.pages[e[0]].containerElem);if(this._gotoPage(e[0],{offset:-Math.floor(e[1]*n.height())}),null!=e[2]){var i=t(this.viewportManager.container);if(!t(i).is(window)){var r=e[2];r=Math.floor(r*n.width());var o=n.width()-i.width();i[0].scrollLeft=Math.min(o,r)}}}},k.prototype.zoom=function(t){var e=this.viewportManager.viewRect;if(e){var n=this.pagePosition();this._currentZoomMultiplier*=t,this._checkBodyWidth(),this._updatePageWidths(),this.restorePosition(n),this._zoomed(),this.documentManager._fireZoomed(t)}},h(x,["expectedFirstPageChanged","viewmodeChanged","enteredFullscreen","exitedFullscreen","hideExtras","showExtras","zoomed","pageHide","pageLoaded","allPagesAdded","pageView","visiblePagesChanged","viewmodeInitialized"]),x.prototype.disableRestorePosition=function(){this.viewManagers.scroll._disableRestorePosition=!0},x.prototype._fireZoomed=function(t){this.fireEvent("zoomed",t)},x.prototype.nextFontAggregatorHost=function(){return this._currentFontAggregatorHostIdx=(this._currentFontAggregatorHostIdx+1)%this.fontAggregatorHosts.length,this.fontAggregatorHosts[this._currentFontAggregatorHostIdx]},x.prototype._fireHideExtras=function(){this.fireEvent("hideExtras")},x.prototype._fireShowExtras=function(){this.fireEvent("showExtras")},x.prototype.currentPageNum=function(){return this._expectedFirstPageNum},x.prototype.setupTestElements=function(){this._fontLoader.setupTestElements()},x.prototype.pageCount=function(){if(this.hasOwnProperty("_pageCount"))return this._pageCount;
var t=0;for(var e in this.pages)this.pages.hasOwnProperty(e)&&t++;return this._pageCount=t,this._pageCount},x.prototype.setupPaidDocument=function(t,e){this.allowedPages=t,this.originalPageCount=e,this._allowedPagesHash=[],this._maximumAllowedPage=Math.max.apply(null,this.allowedPages),this._minimumAllowedPage=Math.min.apply(null,this.allowedPages),this._isPaidDocument=!0,this._pageMissingElements=[];for(var n=0;n<t.length;n++)this._allowedPagesHash[t[n]]=!0,(n>0&&t[n]>t[n-1]+1||0===n&&1!=t[n])&&this._pageMissingElements.push("page_missing_explanation_"+t[n].toString());this._maximumAllowedPage!=this.originalPageCount&&this._pageMissingElements.push("page_missing_explanation_"+(this.originalPageCount+1).toString())},x.prototype.minimumPageNumber=function(){return"book"==this.viewMode()?0:1},x.prototype.maximumPageNumber=function(){return this.allowedPages?this.originalPageCount:this.pageCount()},x.prototype.getClosestPageNumber=function(t,e){if(!this.allowedPages)return t;if(this._allowedPagesHash[t])return t;if(t>=this._maximumAllowedPage)return this._maximumAllowedPage;if(t<=this._minimumAllowedPage)return this._minimumAllowedPage;for(var n=1;n<=this.originalPageCount;n++){if(0>=e&&this._allowedPagesHash[t-n]===!0)return t-n;if(e>=0&&t+n<this.originalPageCount&&this._allowedPagesHash[t+n]===!0)return t+n}},x.prototype.setPageMissingModulesVisible=function(e){if("undefined"==typeof t&&"undefined"!=typeof scribd&&x.setJQuery(scribd.jQuery),this._isPaidDocument)for(var n=0;n<this._pageMissingElements.length;n++){var i=t(this._pageMissingElements[n]);i&&(e?i.show():i.hide())}},x.prototype.getNextAvailablePage=function(t){return getClosestPageNumber(t,1)},x.prototype.getPreviousAvailablePage=function(t){return getClosestPageNumber(t,-1)},x.prototype.flushFontQueue=function(){this._fontLoader.flushFontQueue()},x.prototype.visiblePagesChanged=function(){var t=[];for(var e in this.pages)if(this.pages.hasOwnProperty(e)){var n=this.pages[e];n.isVisible&&t.push(n)}if(t.length){t.sort(function(t,e){return t.pageNum<e.pageNum?-1:1}),this.fireEvent("visiblePagesChanged",t),this.visiblePages=t;var i=this.firstVisiblePage;this.firstVisiblePage=t.length>0?t[0]:null,this.lastVisiblePage=t.length>0?t[t.length-1]:null,this.isScrolling||(this._loadAdjacentFonts(),this._loadAdjacentPages()),(this.firstVisiblePage===i||this.firstVisiblePage&&i)&&this.firstVisiblePage.pageNum==i.pageNum||!this.isScrolling&&this.firstVisiblePage&&this._updateExpectedFirstPage(this.firstVisiblePage.pageNum),this.scheduleLogPageView()}},x.prototype.boundingRatioForPage=function(t){var e=this.viewportManager.viewRect,n=t.boundingRect,i=n.bottom-n.top,r=n.right-n.left;return{left:(e.left-n.left)/r,right:(e.right-n.right)/r+1,top:S((e.top-n.top)/i+t.pageNum,t.pageNum,t.pageNum+1),bottom:S((e.bottom-n.bottom)/i+t.pageNum+1,t.pageNum,t.pageNum+1)}},x.prototype.scheduleLogPageView=function(){this.logPageViewTimout&&window.clearTimeout(this.logPageViewTimout);var t=this;this.logPageViewTimout=window.setTimeout(function(){t.logPageView(),t.logPageViewTimout=null},1e3)},x.prototype.getVisibleBBox=function(){var t={};if(this.firstVisiblePage){var e=this.boundingRatioForPage(this.firstVisiblePage);t.left=e.left,t.right=e.right,t.top=e.top}if(this.lastVisiblePage){var n=this.boundingRatioForPage(this.lastVisiblePage);t.bottom=n.bottom}return t},x.prototype.logPageView=function(){var t=this.getVisibleBBox();for(var e in t)t.hasOwnProperty(e)&&(t[e]=C(t[e]));var n=window.$rat;if(n){var i;i="2"==window.RAT_API_VERSION?[[t.left,t.top],[t.right,t.bottom]]:"("+t.left+" "+t.top+") ("+t.right+" "+t.bottom+")",n("fourgen.viewchange",i)}return this.fireEvent("pageView"),t},x.prototype._updateExpectedFirstPage=function(t){this._expectedFirstPageNum=t,this.fireEvent("expectedFirstPageChanged",this._expectedFirstPageNum)},x.prototype._loadAdjacentFonts=function(){if(this.firstVisiblePage&&this.lastVisiblePage)for(var t=this.firstVisiblePage.pageNum-i,e=this.lastVisiblePage.pageNum+i,n=t;e>=n;n++){var r=this.pages[n];r&&r.loadFonts()}},x.prototype._loadAdjacentPages=function(){if(this.firstVisiblePage&&this.lastVisiblePage){for(var t=this.firstVisiblePage.pageNum-n,e=this.lastVisiblePage.pageNum+n,i=t;e>=i;i++){var r=this.pages[i];r&&!r.loadHasStarted&&(r.load(),this.mobile&&r.setWidth(this._pageWidths))}this.mobile&&this._removeUnusedPages()}},x.prototype._removeUnusedPages=function(){for(var t=this.firstVisiblePage.pageNum-n,e=this.lastVisiblePage.pageNum+n,i=this.pages,r=n+1;i[r];)(t>r||r>e)&&i[r].remove(),r++},x.prototype._updatePageBoundingRects=function(){for(var t in this.pages)this.pages.hasOwnProperty(t)&&this.pages[t]._updateBoundingRect()},x.prototype.removeInsteadOfBlurring=function(){return x.disablePageBlur?!0:"undefined"==typeof Scribd||"undefined"==typeof t?!0:!1},x.prototype.addPage=function(t){if(!t.blur||!this.removeInsteadOfBlurring()){if(void 0===t.pageNum)throw"must have pageNum param";t.docManager=this;var e=new m(t);return this.pages[t.pageNum]=e,this._pageWidths&&e.setWidth(this._pageWidths),this.currentFontGroup.isFull()&&(this.currentFontGroup=this.currentFontGroup.newNextGroup()),e.setLoadFontGroup(this.currentFontGroup),e}t.containerElem.parentNode.removeChild(t.containerElem)},x.prototype.setIsScrolling=function(t){t?this._scrollingCount+=1:this._scrollingCount-=1,this._scrollingCount<0&&(this._scrollingCount=0),this.isScrolling=0===this._scrollingCount?!1:!0},x.prototype.setViewManager=function(t,e){if(this._currentViewManager)this._setViewManager(t),"function"==typeof e&&e();else{var n=this;this.addEvent("viewmodeInitialized",function(){n.setViewManager(t,e)})}},x.prototype._setViewManager=function(t,e){e||this._currentViewManager.unregister();var n=this._currentViewManager;this._currentViewManager=this.viewManagers[t],this._currentViewManager.register(this,this.viewportManager),this.fireEvent("viewmodeChanged",this.viewMode(),n?n.name():null)},x.prototype.setInitialViewManager=function(t){if(this._currentViewManager)throw"This should be called before any view manager exists";this._setViewManager(t,!0),this.fireEvent("viewmodeInitialized",this.viewMode(),null)},x.prototype.setDefaultWidth=function(t){this._currentViewManager._currentPageWidth=t,this._currentViewManager._currentZoomMultiplier=1,this._currentViewManager._updatePageWidths()},x.prototype.subImageSrc=function(t){var e,n=0;for(e=0;e<t.length;e++)n+=t.charCodeAt(e);var i=this._imageDomainSubstitutionList[n%this._imageDomainSubstitutionList.length];return t.replace(this._imageDomainSubstitutionFrom,i)},x.prototype.allPagesAdded=function(){if(this._allPagesAddedCalled)throw"can only call allPagesAdded once";this.viewportManager.enable(),this._updatePageBoundingRects(),this.setInitialViewManager(this.defaultViewMode),this.fireEvent("allPagesAdded")},x.prototype.setEmbeddedDoc=function(t){this._isEmbed="True"===t},x.prototype.setPageWidths=function(t){this._pageWidths=t;for(var e in this.pages)this.pages.hasOwnProperty(e)&&this.pages[e].setWidth(this._pageWidths);this._updatePageBoundingRects()},x.prototype.addFont=function(t,e,n,i,r,o){this._fontLoader.addFont(t,e,n,i,r,o)},x.prototype.setNumFonts=function(t){this._fontLoader.setNumFonts(t)},x.prototype.initStyles=function(){this._fontLoader.initStyles()},x.prototype.gotoPage=function(t,e){var n=!M(t),i=null;if(n&&(i=+(t%1).toFixed(2),t=Math.floor(t)),!(t<this.minimumPageNumber()||t>this.maximumPageNumber())){e||(e={}),n&&void 0==e.frac&&(e.frac=i);var r=e.direction||0,o=this.pages[t];void 0===o&&this._isPaidDocument&&(t=this.getClosestPageNumber(t,r),o=this.pages[t]),this.mobile&&this.pages[t]&&this.pages[t].setWidth(this._pageWidths),this._updateExpectedFirstPage(t),this._currentViewManager.gotoPage(this._expectedFirstPageNum,e)}},x.prototype.gotoPreviousPage=function(){var t=this._currentViewManager._pagingStep();this._currentViewManager.isTopPageInView()?this.gotoPage(this._expectedFirstPageNum-t,{direction:-1}):this.gotoPage(this._expectedFirstPageNum,{direction:-1})},x.prototype.gotoNextPage=function(){var t=this._currentViewManager._pagingStep();this.gotoPage(this._expectedFirstPageNum+t,{direction:1})},x.prototype.enterFullscreen=function(){this._currentViewManager.enterFullscreen()},x.prototype.exitFullscreen=function(){this._currentViewManager.exitFullscreen()},x.prototype.isFullscreen=function(){return this._currentViewManager.isFullscreen},x.prototype._fireEnteredFullscreen=function(){this.fireEvent("enteredFullscreen")},x.prototype._fireExitedFullscreen=function(){this.fireEvent("exitedFullscreen")},x.prototype.viewMode=function(){return this._currentViewManager?this._currentViewManager.name():null},x.prototype.zoom=function(t){this._currentViewManager.zoom(t)},x.prototype.resetZoom=function(){this._currentViewManager.resetZoom()},x.prototype.setImageDomainSubstitution=function(t,e){this._imageDomainSubstitutionFrom=t,this._imageDomainSubstitutionList=e},x.prototype.disableViewManagerResizeWidth=function(){v.prototype._checkBodyWidth=function(){}},x.prototype.disable=function(){this.disabled||(this.disabled=!0,this.viewportManager.disable())},x.prototype.doDynamicBlurring=function(e){var n,i,r;this.removeInsteadOfBlurring()||(n=t("#"+e),n.on("dragstart, selectstart, contextmenu",function(t){t.preventDefault()}),n.find("*").andSelf().attr("unselectable","on"),r=Modernizr&&Modernizr.textshadow&&t.browser&&(t.browser.webkit&&!t.browser.safari||t.browser.mozilla||t.browser.opera)&&!(t.browser.mozilla===!0&&parseFloat(t.browser.version)<4&&parseFloat(t.browser.version)>=3),t.browser||console.log("Hi there, it seems as though you've upgraded jQuery and browser detection is no longer working in 4gen.js"),t(document).ready(function(){i=t(t("#page_blur_promo_template").html()).removeAttr("id").appendTo("#"+e).css("zIndex",8).show(),i.find(".page_blur_promo_title").html(I18n.t("pdfs.show.you_re_reading_a_preview")),i.find(".missing_page_buy_button").html(I18n.t("pdfs.show.download_with_free_trial")),not_shown_text=I18n.t("pdfs.show.unlock_full_access"),i.find(".gap").html(not_shown_text),r||i.find(".page-blur-promo-overlay").height("100%").width("100%").css("zIndex",7).show()}),r&&(n.find(".text_layer").css({color:"transparent","text-shadow":"0px 0px 70px black"}),n.find(".text_layer [style]").css({color:"transparent"}),n.find(".image_layer").imagesLoaded(function(){n.find(".image_layer img").each(function(){this.height>250&&this.width>250&&t(this).css({opacity:.04})})}),n.find(".image_layer").length&&t(".page_blur_promo_overlay").remove()))},x.setJQuery=function(e){t=e},x.ScrollViewManager=k,x.SlideViewManager=w,x.BookViewManager=y,x}();window.DocumentManager=d},void 0===window.DocumentManager&&init_4gen();


/* public/javascripts/storage.js @ 1500067170 */
window.localStorage&&window.sessionStorage||function(){var t=function(t){function e(t,e,n){var i,r;n?(i=new Date,i.setTime(i.getTime()+24*n*60*60*1e3),r="; expires="+i.toGMTString()):r="",document.cookie=t+"="+e+r+"; path=/"}function n(t){var e,n,i=t+"=",r=document.cookie.split(";");for(e=0;e<r.length;e++){for(n=r[e];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(i))return n.substring(i.length,n.length)}return null}function i(n){n=JSON.stringify(n),"session"==t?window.name=n:e("localStorage",n,365)}function r(){"session"==t?window.name="":e("localStorage","",365)}function o(){var e="session"==t?window.name:n("localStorage");return e?JSON.parse(e):{}}function s(){var t=0;for(var e in a)a.hasOwnProperty(e)&&(t+=1);return t}var a=o();return{clear:function(){a={},r(),this.length=s()},getItem:function(t){return t=encodeURIComponent(t),void 0===a[t]?null:a[t]},key:function(t){var e=0;for(var n in a){if(e==t)return decodeURIComponent(n);e++}return null},removeItem:function(t){t=encodeURIComponent(t),delete a[t],i(a),this.length=s()},setItem:function(t,e){t=encodeURIComponent(t),a[t]=String(e),i(a),this.length=s()},length:0}};window.localStorage||(window.localStorage=new t("local")),window.sessionStorage||(window.sessionStorage=new t("session"))}();


/* public/javascripts/modernizr.custom.12353.js @ 1500067170 */
window.Modernizr=function(t,e,n){function i(t){v.cssText=t}function r(t,e){return typeof t===e}function o(t,e){return!!~(""+t).indexOf(e)}function s(t,e){for(var i in t){var r=t[i];if(!o(r,"-")&&v[r]!==n)return"pfx"==e?r:!0}return!1}function a(t,e,i){for(var o in t){var s=e[t[o]];if(s!==n)return i===!1?t[o]:r(s,"function")?s.bind(i||e):s}return!1}function c(t,e,n){var i=t.charAt(0).toUpperCase()+t.slice(1),o=(t+" "+w.join(i+" ")+i).split(" ");return r(e,"string")||r(e,"undefined")?s(o,e):(o=(t+" "+k.join(i+" ")+i).split(" "),a(o,e,n))}var l,u,d,h="2.8.2",p={},f=!0,_=e.documentElement,m="modernizr",g=e.createElement(m),v=g.style,b=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),y="Webkit Moz O ms",w=y.split(" "),k=y.toLowerCase().split(" "),x={},S=[],C=S.slice,T=function(t,n,i,r){var o,s,a,c,l=e.createElement("div"),u=e.body,d=u||e.createElement("body");if(parseInt(i,10))for(;i--;)a=e.createElement("div"),a.id=r?r[i]:m+(i+1),l.appendChild(a);return o=["&#173;",'<style id="s',m,'">',t,"</style>"].join(""),l.id=m,(u?l:d).innerHTML+=o,d.appendChild(l),u||(d.style.background="",d.style.overflow="hidden",c=_.style.overflow,_.style.overflow="hidden",_.appendChild(d)),s=n(l,t),u?l.parentNode.removeChild(l):(d.parentNode.removeChild(d),_.style.overflow=c),!!s},E={}.hasOwnProperty;d=r(E,"undefined")||r(E.call,"undefined")?function(t,e){return e in t&&r(t.constructor.prototype[e],"undefined")}:function(t,e){return E.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var n=C.call(arguments,1),i=function(){if(this instanceof i){var r=function(){};r.prototype=e.prototype;var o=new r,s=e.apply(o,n.concat(C.call(arguments)));return Object(s)===s?s:o}return e.apply(t,n.concat(C.call(arguments)))};return i}),x.textshadow=function(){return""===e.createElement("div").style.textShadow},x.csstransforms=function(){return!!c("transform")},x.csstransforms3d=function(){var t=!!c("perspective");return t&&"webkitPerspective"in _.style&&T("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(e){t=9===e.offsetLeft&&3===e.offsetHeight}),t};for(var D in x)d(x,D)&&(u=D.toLowerCase(),p[u]=x[D](),S.push((p[u]?"":"no-")+u));return p.addTest=function(t,e){if("object"==typeof t)for(var i in t)d(t,i)&&p.addTest(i,t[i]);else{if(t=t.toLowerCase(),p[t]!==n)return p;e="function"==typeof e?e():e,"undefined"!=typeof f&&f&&(_.className+=" "+(e?"":"no-")+t),p[t]=e}return p},i(""),g=l=null,function(t,e){function n(t,e){var n=t.createElement("p"),i=t.getElementsByTagName("head")[0]||t.documentElement;return n.innerHTML="x<style>"+e+"</style>",i.insertBefore(n.lastChild,i.firstChild)}function i(){var t=v.elements;return"string"==typeof t?t.split(" "):t}function r(t){var e=g[t[_]];return e||(e={},m++,t[_]=m,g[m]=e),e}function o(t,n,i){if(n||(n=e),u)return n.createElement(t);i||(i=r(n));var o;return o=i.cache[t]?i.cache[t].cloneNode():f.test(t)?(i.cache[t]=i.createElem(t)).cloneNode():i.createElem(t),!o.canHaveChildren||p.test(t)||o.tagUrn?o:i.frag.appendChild(o)}function s(t,n){if(t||(t=e),u)return t.createDocumentFragment();n=n||r(t);for(var o=n.frag.cloneNode(),s=0,a=i(),c=a.length;c>s;s++)o.createElement(a[s]);return o}function a(t,e){e.cache||(e.cache={},e.createElem=t.createElement,e.createFrag=t.createDocumentFragment,e.frag=e.createFrag()),t.createElement=function(n){return v.shivMethods?o(n,t,e):e.createElem(n)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+i().join().replace(/[\w\-]+/g,function(t){return e.createElem(t),e.frag.createElement(t),'c("'+t+'")'})+");return n}")(v,e.frag)}function c(t){t||(t=e);var i=r(t);return v.shivCSS&&!l&&!i.hasCSS&&(i.hasCSS=!!n(t,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),u||a(t,i),t}var l,u,d="3.7.0",h=t.html5||{},p=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,_="_html5shiv",m=0,g={};!function(){try{var t=e.createElement("a");t.innerHTML="<xyz></xyz>",l="hidden"in t,u=1==t.childNodes.length||function(){e.createElement("a");var t=e.createDocumentFragment();return"undefined"==typeof t.cloneNode||"undefined"==typeof t.createDocumentFragment||"undefined"==typeof t.createElement}()}catch(n){l=!0,u=!0}}();var v={elements:h.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:d,shivCSS:h.shivCSS!==!1,supportsUnknownElements:u,shivMethods:h.shivMethods!==!1,type:"default",shivDocument:c,createElement:o,createDocumentFragment:s};t.html5=v,c(e)}(this,e),p._version=h,p._prefixes=b,p._domPrefixes=k,p._cssomPrefixes=w,p.testProp=function(t){return s([t])},p.testAllProps=c,p.testStyles=T,p.prefixed=function(t,e,n){return e?c(t,e,n):c(t,"pfx")},_.className=_.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+S.join(" "):""),p}(this,this.document),function(t,e,n){function i(t){return"[object Function]"==m.call(t)}function r(t){return"string"==typeof t}function o(){}function s(t){return!t||"loaded"==t||"complete"==t||"uninitialized"==t}function a(){var t=g.shift();v=1,t?t.t?f(function(){("c"==t.t?h.injectCss:h.injectJs)(t.s,0,t.a,t.x,t.e,1)},0):(t(),a()):v=0}function c(t,n,i,r,o,c,l){function u(e){if(!p&&s(d.readyState)&&(b.r=p=1,!v&&a(),d.onload=d.onreadystatechange=null,e)){"img"!=t&&f(function(){w.removeChild(d)},50);for(var i in T[n])T[n].hasOwnProperty(i)&&T[n][i].onload()}}var l=l||h.errorTimeout,d=e.createElement(t),p=0,m=0,b={t:i,s:n,e:o,a:c,x:l};1===T[n]&&(m=1,T[n]=[]),"object"==t?d.data=n:(d.src=n,d.type=t),d.width=d.height="0",d.onerror=d.onload=d.onreadystatechange=function(){u.call(this,m)},g.splice(r,0,b),"img"!=t&&(m||2===T[n]?(w.insertBefore(d,y?null:_),f(u,l)):T[n].push(d))}function l(t,e,n,i,o){return v=0,e=e||"j",r(t)?c("c"==e?x:k,t,e,this.i++,n,i,o):(g.splice(this.i++,0,t),1==g.length&&a()),this}function u(){var t=h;return t.loader={load:l,i:0},t}var d,h,p=e.documentElement,f=t.setTimeout,_=e.getElementsByTagName("script")[0],m={}.toString,g=[],v=0,b="MozAppearance"in p.style,y=b&&!!e.createRange().compareNode,w=y?p:_.parentNode,p=t.opera&&"[object Opera]"==m.call(t.opera),p=!!e.attachEvent&&!p,k=b?"object":p?"script":"img",x=p?"script":k,S=Array.isArray||function(t){return"[object Array]"==m.call(t)},C=[],T={},E={timeout:function(t,e){return e.length&&(t.timeout=e[0]),t}};h=function(t){function e(t){var e,n,i,t=t.split("!"),r=C.length,o=t.pop(),s=t.length,o={url:o,origUrl:o,prefixes:t};for(n=0;s>n;n++)i=t[n].split("="),(e=E[i.shift()])&&(o=e(o,i));for(n=0;r>n;n++)o=C[n](o);return o}function s(t,r,o,s,a){var c=e(t),l=c.autoCallback;c.url.split(".").pop().split("?").shift(),c.bypass||(r&&(r=i(r)?r:r[t]||r[s]||r[t.split("/").pop().split("?")[0]]),c.instead?c.instead(t,r,o,s,a):(T[c.url]?c.noexec=!0:T[c.url]=1,o.load(c.url,c.forceCSS||!c.forceJS&&"css"==c.url.split(".").pop().split("?").shift()?"c":n,c.noexec,c.attrs,c.timeout),(i(r)||i(l))&&o.load(function(){u(),r&&r(c.origUrl,a,s),l&&l(c.origUrl,a,s),T[c.url]=2})))}function a(t,e){function n(t,n){if(t){if(r(t))n||(d=function(){var t=[].slice.call(arguments);h.apply(this,t),p()}),s(t,d,e,0,l);else if(Object(t)===t)for(c in a=function(){var e,n=0;for(e in t)t.hasOwnProperty(e)&&n++;return n}(),t)t.hasOwnProperty(c)&&(!n&&!--a&&(i(d)?d=function(){var t=[].slice.call(arguments);h.apply(this,t),p()}:d[c]=function(t){return function(){var e=[].slice.call(arguments);t&&t.apply(this,e),p()}}(h[c])),s(t[c],d,e,c,l))}else!n&&p()}var a,c,l=!!t.test,u=t.load||t.both,d=t.callback||o,h=d,p=t.complete||o;n(l?t.yep:t.nope,!!u),u&&n(u)}var c,l,d=this.yepnope.loader;if(r(t))s(t,0,d,0);else if(S(t))for(c=0;c<t.length;c++)l=t[c],r(l)?s(l,0,d,0):S(l)?h(l):Object(l)===l&&a(l,d);else Object(t)===t&&a(t,d)},h.addPrefix=function(t,e){E[t]=e},h.addFilter=function(t){C.push(t)},h.errorTimeout=1e4,null==e.readyState&&e.addEventListener&&(e.readyState="loading",e.addEventListener("DOMContentLoaded",d=function(){e.removeEventListener("DOMContentLoaded",d,0),e.readyState="complete"},0)),t.yepnope=u(),t.yepnope.executeStack=a,t.yepnope.injectJs=function(t,n,i,r,c,l){var u,d,p=e.createElement("script"),r=r||h.errorTimeout;p.src=t;for(d in i)p.setAttribute(d,i[d]);n=l?a:n||o,p.onreadystatechange=p.onload=function(){!u&&s(p.readyState)&&(u=1,n(),p.onload=p.onreadystatechange=null)},f(function(){u||(u=1,n(1))},r),c?p.onload():_.parentNode.insertBefore(p,_)},t.yepnope.injectCss=function(t,n,i,r,s,c){var l,r=e.createElement("link"),n=c?a:n||o;r.href=t,r.rel="stylesheet",r.type="text/css";for(l in i)r.setAttribute(l,i[l]);s||(_.parentNode.insertBefore(r,_),f(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};


/* public/javascripts/imagesloaded.pkgd.js @ 1500067170 */
!function(t){"use strict";function e(){}function n(t,e){if(r)return e.indexOf(t);for(var n=e.length;n--;)if(e[n]===t)return n;return-1}var i=e.prototype,r=Array.prototype.indexOf?!0:!1;i._getEvents=function(){return this._events||(this._events={})},i.getListeners=function(t){var e,n,i=this._getEvents();if("object"==typeof t){e={};for(n in i)i.hasOwnProperty(n)&&t.test(n)&&(e[n]=i[n])}else e=i[t]||(i[t]=[]);return e},i.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&(e={},e[t]=n),e||n},i.addListener=function(t,e){var i,r=this.getListenersAsObject(t);for(i in r)r.hasOwnProperty(i)&&-1===n(e,r[i])&&r[i].push(e);return this},i.on=i.addListener,i.defineEvent=function(t){return this.getListeners(t),this},i.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},i.removeListener=function(t,e){var i,r,o=this.getListenersAsObject(t);for(r in o)o.hasOwnProperty(r)&&(i=n(e,o[r]),-1!==i&&o[r].splice(i,1));return this},i.off=i.removeListener,i.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},i.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},i.manipulateListeners=function(t,e,n){var i,r,o=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(i=n.length;i--;)o.call(this,e,n[i]);else for(i in e)e.hasOwnProperty(i)&&(r=e[i])&&("function"==typeof r?o.call(this,i,r):s.call(this,i,r));return this},i.removeEvent=function(t){var e,n=typeof t,i=this._getEvents();if("string"===n)delete i[t];else if("object"===n)for(e in i)i.hasOwnProperty(e)&&t.test(e)&&delete i[e];else delete this._events;return this},i.emitEvent=function(t,e){var n,i,r,o=this.getListenersAsObject(t);for(i in o)if(o.hasOwnProperty(i))for(n=o[i].length;n--;)r=e?o[i][n].apply(null,e):o[i][n](),r===!0&&this.removeListener(t,o[i][n]);return this},i.trigger=i.emitEvent,i.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},"function"==typeof define&&define.amd?define(function(){return e}):t.EventEmitter=e}(this),function(t){"use strict";var e=document.documentElement,n=function(){};e.addEventListener?n=function(t,e,n){t.addEventListener(e,n,!1)}:e.attachEvent&&(n=function(e,n,i){e[n+i]=i.handleEvent?function(){var e=t.event;e.target=e.target||e.srcElement,i.handleEvent.call(i,e)}:function(){var n=t.event;n.target=n.target||n.srcElement,i.call(e,n)},e.attachEvent("on"+n,e[n+i])});var i=function(){};e.removeEventListener?i=function(t,e,n){t.removeEventListener(e,n,!1)}:e.detachEvent&&(i=function(t,e,n){t.detachEvent("on"+e,t[e+n]);try{delete t[e+n]}catch(i){t[e+n]=void 0}});var r={bind:n,unbind:i};"function"==typeof define&&define.amd?define(r):t.eventie=r}(this),function(t){"use strict";function e(t,e){for(var n in e)t[n]=e[n];return t}function n(t){return"[object Array]"===c.call(t)}function i(t){var e=[];if(n(t))e=t;else if("number"==typeof t.length)for(var i=0,r=t.length;r>i;i++)e.push(t[i]);else e.push(t);return e}function r(t,n){function r(t,n,s){if(!(this instanceof r))return new r(t,n);"string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=i(t),this.options=e({},this.options),"function"==typeof n?s=n:e(this.options,n),s&&this.on("always",s),this.getImages(),o&&(this.jqDeferred=new o.Deferred);var a=this;setTimeout(function(){a.check()})}function c(t){this.img=t}r.prototype=new t,r.prototype.options={},r.prototype.getImages=function(){this.images=[];for(var t=0,e=this.elements.length;e>t;t++){var n=this.elements[t];"IMG"===n.nodeName&&this.addImage(n);for(var i=n.querySelectorAll("img"),r=0,o=i.length;o>r;r++){var s=i[r];this.addImage(s)}}},r.prototype.addImage=function(t){var e=new c(t);this.images.push(e)},r.prototype.check=function(){function t(t,r){return e.options.debug&&a&&s.log("confirm",t,r),e.progress(t),n++,n===i&&e.complete(),!0}var e=this,n=0,i=this.images.length;if(this.hasAnyBroken=!1,!i)return void this.complete();for(var r=0;i>r;r++){var o=this.images[r];o.on("confirm",t),o.check()}},r.prototype.progress=function(t){this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emit("progress",this,t),this.jqDeferred&&this.jqDeferred.notify(this,t)},r.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emit(t,this),this.emit("always",this),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},o&&(o.fn.imagesLoaded=function(t,e){var n=new r(this,t,e);return n.jqDeferred.promise(o(this))});var l={};return c.prototype=new t,c.prototype.check=function(){var t=l[this.img.src];if(t)return void this.useCached(t);if(l[this.img.src]=this,this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var e=this.proxyImage=new Image;n.bind(e,"load",this),n.bind(e,"error",this),e.src=this.img.src},c.prototype.useCached=function(t){if(t.isConfirmed)this.confirm(t.isLoaded,"cached was confirmed");else{var e=this;t.on("confirm",function(t){return e.confirm(t.isLoaded,"cache emitted confirmed"),!0})}},c.prototype.confirm=function(t,e){this.isConfirmed=!0,this.isLoaded=t,this.emit("confirm",this,e)},c.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},c.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindProxyEvents()},c.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindProxyEvents()},c.prototype.unbindProxyEvents=function(){n.unbind(this.proxyImage,"load",this),n.unbind(this.proxyImage,"error",this)},r}var o=t.jQuery,s=t.console,a="undefined"!=typeof s,c=Object.prototype.toString;"function"==typeof define&&define.amd?define(["eventEmitter","eventie"],r):t.imagesLoaded=r(t.EventEmitter,t.eventie)}(window);


/* public/javascripts/ouibounce.js @ 1500067170 */
!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e(require,exports,module):t.ouibounce=e()}(this,function(){return function(t,e){"use strict";function n(t,e){return"undefined"==typeof t?e:t}function i(t){var e=24*t*60*60*1e3,n=new Date;return n.setTime(n.getTime()+e),"; expires="+n.toUTCString()}function r(){u()||(S.addEventListener("mouseleave",o),S.addEventListener("mouseenter",s),S.addEventListener("keydown",a))}function o(t){t.clientY>_||(x=setTimeout(d,g))}function s(){x&&(clearTimeout(x),x=null)}function a(t){C||t.metaKey&&76===t.keyCode&&(C=!0,x=setTimeout(d,g))}function c(t,e){return l()[t]===e}function l(){for(var t=document.cookie.split("; "),e={},n=t.length-1;n>=0;n--){var i=t[n].split("=");e[i[0]]=i[1]}return e}function u(){return c(w,"true")&&!f}function d(){u()||(t&&(t.style.display="block"),v(),h())}function h(t){var e=t||{};"undefined"!=typeof e.cookieExpire&&(b=i(e.cookieExpire)),e.sitewide===!0&&(k=";path=/"),"undefined"!=typeof e.cookieDomain&&(y=";domain="+e.cookieDomain),"undefined"!=typeof e.cookieName&&(w=e.cookieName),document.cookie=w+"=true"+b+y+k,S.removeEventListener("mouseleave",o),S.removeEventListener("mouseenter",s),S.removeEventListener("keydown",a)}var p=e||{},f=p.aggressive||!1,_=n(p.sensitivity,20),m=n(p.timer,1e3),g=n(p.delay,0),v=p.callback||function(){},b=i(p.cookieExpire)||"",y=p.cookieDomain?";domain="+p.cookieDomain:"",w=p.cookieName?p.cookieName:"viewedOuibounceModal",k=p.sitewide===!0?";path=/":"",x=null,S=document.documentElement;setTimeout(r,m);var C=!1;return{fire:d,disable:h,isDisabled:u}}});


/* :asset_packager_compatibility, 'config/asset_packages.yml' @ 1500067087 */


/* :files, 'public/javascripts/shared', ... @ (none) */


/* :files, 'app/views', ... @ (none) */


/* :files, 'app/views', ... @ 1500067086 */
/* app/views/shared/recommendation_tracking.coffee @ 1500067086 */
(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=[].slice;Scribd.RecommendationTracking=function(){function n(){throw"Scribd.RecommendationTracking is not instantiatable"}return n._page_count=0,n._compilation_ids={},n._seen_rv_events={},n.Module=function(){function n(e,n){this.opts=null!=n?n:{},this.ready=t(this.ready,this),this.container=$(e),this.container.on("scribd:enclosing_tracking_module",function(t){return function(e,n){return n(t)}}(this)),this.with_tracking=$.Deferred(function(t){return function(e){return e.done(function(e){var n;return t.tracking=e,"function"==typeof(n=t.opts).on_tracking?n.on_tracking(t.tracking):void 0})}}(this)),this.opts.compilation_id?Scribd.RecommendationTracking.page_view_deferred(this.opts.compilation_id).done(function(t){return function(e){return t.ready(e,t.opts.widget_name)}}(this)):this.container.on("scribd:setup_tracking",function(t){return function(e,n,i){return t.ready(n,i)}}(this))}return n.prototype.setup_inview_tracking=function(){return null==this.tracking?"undefined"!=typeof console&&null!==console?console.error("missing tracking"):void 0:(this.container.one("inview",function(t){return function(){var e;return Scribd.RecommendationTracking.track_module_view(t.tracking.view_id,t.tracking.module_id,t.tracking.widget_name),null!=(e=t.opts.on_in_view)?e.call(t,t.tracking):void 0}}(this)),Scribd.RecommendationTracking.trigger_inview_check())},n.prototype.setup_click_tracking=function(t){var e,n,i,r,o,s,a;if(null==t&&(t=this.container.find("[data-track_uuid]")),null==this.tracking)return"undefined"!=typeof console&&null!==console?console.error("missing tracking"):void 0;for(this.container.data("track_uuid")&&(t=t.add(this.container)),s=[],i=0,r=t.length;r>i;i++)e=t[i],e=$(e),n=e.data("track_rats")||"rc",o="mc"===n?"mi":"ri",a={vi:this.tracking.view_id},a[o]=e.data("track_uuid"),e.attr("data-track_rats",n),s.push(e.attr("data-track_rats_value",JSON.stringify(a)));return s},n.prototype.ready=function(t,e){var n;return(n=this.opts.module_id||this.container.data("track_uuid"))?(this.with_tracking.resolve({widget_name:e,view_id:t,module_id:n}),this.setup_inview_tracking(),this.setup_click_tracking()):void 0},n.prototype.track_module_click=function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],this.with_tracking.done(function(){return function(n){var i;return(i=Scribd.RecommendationTracking).track_module_click.apply(i,[n.view_id,n.module_id].concat(e.call(t)))}}(this))},n}(),n.page_view_deferred=function(t){var e;return t?(n._view_id_deferred||(n._view_id_deferred={}),e=n._view_id_deferred[t],e||(e=$.Deferred(),n._view_id_deferred[t]=e,Scribd.RecommendationTracking.track_page_view(t,function(t){return e.resolve(t)})),e):(console.debug("attempted page view without compilation id"),$.Deferred())},n.track_page_view=function(t,e){var n;return n=this._compilation_ids[t],null==n&&(n=this._compilation_ids[t]=this._page_count++),$rat.root().withVid(function(){return function(i){return i=i+"."+n,$rat("pv",{vi:i,ci:t}),"function"==typeof e?e(i):void 0}}(this))},n.track_module_view=function(t,e,n){var i;return i={vi:t,mi:e},null!=n&&(i.w=n),$rat("mv",i)},n.track_module_click=function(t,e,n){var i;return i={vi:t,mi:e},null!=n&&(i.t=n),$rat("mc",i)},n.track_obj_view=function(t,e){var n;return n=t+"#"+e,this._seen_rv_events[n]?void 0:(this._seen_rv_events[n]=!0,$rat("rv",{vi:t,ri:e}))},n.track_obj_click=function(t,e){return $rat("rc",{vi:t,ri:e})},n.trigger_inview_check=function(){return this.trigger_inview_check=_.debounce(function(){return $.event.special.inview.run()},0),this.trigger_inview_check()},n}()}).call(this);


/* app/views/pdfs/highlighter.coffee @ 1500067086 */
(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Scribd.PdfHighlighter=function(){function e(e){this.scroll_to_el=t(this.scroll_to_el,this),this.container=$(e),docManager.addEvent("pageLoaded",function(t){return function(e){var n,i;return n=parseInt(e.id.match(/\d+$/)[0],10),(null!=(i=t.pages_to_highlight)?i[n]:void 0)?(t.highlight_element(e,t.last_query),delete t.pages_to_highlight[n],t.selecting&&t.selecting.page===n?t.select_result(t.selecting.page,t.selecting.idx):void 0):void 0}}(this))}return e.prototype.highlight_class="fourgen_highlight",e.prototype.select_result=function(t,e){var n,i,r,o;return delete this.selecting,(i=null!=(r=docManager.pages[t])?r.innerPageElem:void 0)?(n=this.highlight_class+"_selected",null!=(o=this.selected)&&o.removeClass(n),this.selected=$(i).find("."+this.highlight_class+":eq("+e+")").addClass(n),docManager.gotoPage(t),_.defer(function(t){return function(){return null!=t.selected[0].scrollIntoView?t.scroll_to_el(t.selected):void 0}}(this))):(docManager.gotoPage(t),this.selecting={page:t,idx:e})},e.prototype.scroll_to_el=function(t){var e,n;return"function"==typeof(e=t[0]).scrollIntoView&&e.scrollIntoView(),n=this.container.find(".document_scroller")[0],n.scrollTop-=300},e.prototype.highlight_from_results=function(t,e){var n,i,r,o,s,a,c;for(this.last_query=t,this.last_results=e,this.pages_to_highlight={},s=_.uniq(function(){var t,n,i;for(i=[],t=0,n=e.length;n>t;t++)a=e[t],i.push(a.pageNum);return i}(),!0),c=[],n=0,i=s.length;i>n;n++)o=s[n],r=docManager.pages[o],c.push((null!=r?r.innerPageElem:void 0)?this.highlight_element(r.containerElem,t):this.pages_to_highlight[o]=!0);return c},e.prototype.clear=function(){var t,e,n,i,r,o;for(r=this.container.find("."+this.highlight_class),o=[],e=0,n=r.length;n>e;e++)t=r[e],i=t.parentNode,i.replaceChild(t.firstChild,t),o.push(i.normalize());return o},e.prototype.highlight_element=function(t,e){var n,i,r;return r=RegExp(Scribd.escape_regexp(e),"i"),i=0,n=function(t){return function(o){var s,a,c,l,u,d,h;if(d=0,3===o.nodeType)l=o.data.search(r),l>=0&&(h=$("<span>"),h.addClass(t.highlight_class),s=o.splitText(l),s.splitText(e.length),a=$(s).clone(),h.append(a),$(s).replaceWith(h),d=1,i++);else if(1===o.nodeType&&o.childNodes&&!/(script|style)/i.test(o.tagName))if((null!=(u=o.className)?u.indexOf(t.highlight_class):void 0)<0||null==o.className)for(c=0;c<o.childNodes.length;)c+=n(o.childNodes[c]),++c;else i++;return d}}(this),n(t),i},e}()}).call(this);


/* app/views/pdfs/_seo_shared.coffee @ 1500067086 */
(function(){Scribd.SeoShared=function(){function t(){}return t.quote_duration=5e3,t.display_interval=moment.duration(1,"days"),t.setup_assignment=function(){var t,e,n;if(null!=(n=document.location.search)?n.match(/\bseo_roadblock\b/):void 0)return!0;if(Scribd.eligible_for_seo_roadblock&&this.has_correct_referrer()&&(t=new CookieJar({path:"/",expires:this.display_interval.asSeconds()}),!t.get("seo_ld")||(e=moment(t.get("seo_ld")),moment().isAfter(e.add(this.display_interval)))))return t.put("seo_ld",moment()),!0},t.has_correct_referrer=function(){return"en_US"===I18n.locale?!0:document.referrer.match(/google|bing|yahoo/i)||window.location.hash.match(/\bscribd\b/)},t.banner_variation=function(){return{value_prop:Scribd.nway_test_choice_value("seo_banner_value_prop")||"default"}},t.seo_variation=function(){return"new_basic"},t}()}).call(this);


/* :class_inlines, 'app/views', ... @ 1500067086 */
/* app/views/shared/filtered_document_page.coffee @ 1500067086 */
(function(){Scribd.UI||(Scribd.UI={}),Scribd.UI.FilteredDocumentPage=function(){function t(t){var e;this.container=$(t),e=this.container.find(".filter_picker"),e.is(".open")&&this.container.find(".toggle_filters_btn").addClass("open"),this.container.on("click",".toggle_filters_btn",function(){return function(t){return $(t.currentTarget).toggleClass("open"),e.slideToggle("fast")}}(this)),this.container.find(".language_filter_picker").fancy_select(),this.container.on("change",".language_filter_picker",function(){return function(t){return window.location=$(t.currentTarget).val()}}(this))}return t}()}).call(this),(Scribd.translations=Scribd.translations||[]).push({en_US:{shared:{filtered_document_page:{search:"Search...",filters:"Filters"}}}});


/* app/views/shared/app_download_promo/lightbox.coffee @ 1500067086 */
(function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Scribd.AppDownloadPromoLightbox=function(e){function n(t,e){this.opts=e,this.container=$(t),n.__super__.constructor.apply(this,arguments),this.opts.load_once&&this.setup_cookie_jar(),this.opts.open_on_load&&_.defer(function(t){return function(){return t.another_lightbox_is_open()?void 0:t.show()}}(this))}return t(n,e),n.prototype.setup_cookie_jar=function(){return this.jar=new CookieJar({expires:31536e4})},n.prototype.show=function(){var t,e;if(!this.opts.load_once||!this.jar.get(this.opts.cookie))return n.__super__.show.apply(this,arguments),t={page:this.opts.track_page},(null!=(e=Scribd.current_doc)?e.id:void 0)&&(t.doc_id=Scribd.current_doc.id),this.container.track_rats("download_app_promo:lightbox:view",t)},n.prototype.close=function(){var t,e;return this.opts.load_once&&this.jar.put(this.opts.cookie,1),t={item:"close lightbox",page:this.opts.track_page},(null!=(e=Scribd.current_doc)?e.id:void 0)&&(t.doc_id=Scribd.current_doc.id),n.__super__.close.apply(this,arguments),_.defer(function(e){return function(){return e.container.track_rats("download_app_promo:lightbox:click",t)}}(this))},n}(Scribd.StackedLightbox)}).call(this);


/* app/views/mobile/shared/_view_in_store_promo.coffee @ 1500067086 */
(function(){Scribd.ViewInStorePromo=function(){function t(t,e){this.opts=null!=e?e:{},this.container=$(t),this.default_opts(),this.setup_events()}return t.prototype.default_opts=function(){return this.opts=_.extend({platform:""},this.opts)},t.prototype.setup_events=function(){return this.container.dispatch("click",{view_in_store_link:function(t){return function(){return t.container.track_rats(t.opts.platform+":mobile","click","view_in_store_link"),"continue"}}(this),close:function(t){return function(){return t.container.trigger("scribd:close_banner"),t.container.remove(),"continue"}}(this)}),this.container.click(function(t){return function(e){return $(e.target).closest(".close").length>0||$(e.target).is(".view_in_store_link")?void 0:t.container.find(".view_in_store_link").click()}}(this))},t}()}).call(this),(Scribd.translations=Scribd.translations||[]).push({en_US:{mobile:{shared:{view_in_store_promo:{install:"Install",view:"View",read_books_audiobooks_and_more:"Read books, audiobooks, and more",scribd_inc:"Scribd, Inc",scribd:"Scribd",get_on_the_store_name_platform_store:"GET \u2014 On the %{store_name_platform} Store"}}}}});


/* app/views/mobile/shared/_app_button.coffee @ 1500067086 */
(function(){var t;t=Scribd.init("Scribd","Mobile"),t.AppButton=function(){function t(t,e){this.container=t,this.opts=e,$(function(t){return function(){return t.container=$(t.container),t.container.dispatch("click",{app_btn:function(){return t.open_app(),"continue"}})}}(this))}return t.track_document_open=function(e,n){var i;return t.cookie||(t.cookie=new CookieJar({path:"/mobile",expires:604800})),i=t.cookie.get("roadblock_tracked"),i&&new Date-i<3e5?void 0:(t.cookie.put("roadblock_tracked",+new Date),$.post(e,{resolution:[screen.height,screen.width],timezone_offset:(new Date).getTimezoneOffset(),platform:navigator.platform,document_id:n}))},t.prototype.open_app=function(){var t;return t=this.opts.document_id&&this.opts.track_url?this.constructor.track_document_open(this.opts.track_url,this.opts.document_id):void 0,t||(t=$.when()),t.done(function(t){return function(){return navigator.userAgent.match(/android/i)?window.location.href=t.opts.app_url:navigator.userAgent.match(/Safari/i)?window.location.href=t.opts.store_url:void 0}}(this))},t}()}).call(this);


/* app/views/shared/reading_progress/base.coffee @ 1500067086 */
(function(){Scribd.ReadingProgress={external_progress_notice_seen:!1},Scribd.ReadingProgress.Base=function(){function t(t){var e,n,i,r;this.opts=null!=t?t:{},this.enabled()&&(this.notify_external_progress(null!=(e=Scribd.current_doc)?e.reading_progress:void 0),this.opts=_.extend(this.default_opts(),this.opts),this.get_ms=(null!=(n=Scribd.ServerOptions)?n.reading_progress_throttle_get_milliseconds:void 0)||this.opts.throttle_get,this.post_ms=(null!=(i=Scribd.ServerOptions)?i.reading_progress_throttle_post_milliseconds:void 0)||this.opts.throttle_post,this.url=null!=(r=Scribd.current_doc.reading_progress)?r.update_url:void 0,this.doc_id=Scribd.current_doc.id,this.offset=null,this.offset_type=null,this.percentage=null,this.throttled_get_handler=_.throttle(function(t){return function(){return t.get()}}(this),this.get_ms,{leading:!0,trailing:!1}),this.throttled_post_handler=_.throttle(function(t){return function(){return t.post()}}(this),this.post_ms,{leading:!1,trailing:!0}),$(window).off(this.events.focus).on(this.events.focus,this.throttled_get_handler))}return t.prototype.events={focus:"focus.reading_progress",scroll:"scroll.reading_progress"},t.prototype.default_opts=function(){return{throttle_get:6e4,throttle_post:1e4}},t.prototype.enabled=function(){var t;return(null!=(t=Scribd.ServerOptions)?t.reading_progress_enabled:void 0)&&Scribd.logged_in?!0:!1},t.prototype.has_external_progress=function(t){return(null!=t?t.offset:void 0)?t.from_current_device?!1:"browser"===t.device_name?!1:!0:!1},t.prototype.external_progress_notification_message=function(t){return I18n.t("shared.reading_progress.base.we_ve_moved_you_to_where_you",{progress_device_name:t.device_name})},t.prototype.notify_external_progress=function(t){var e;return this.has_external_progress(t)&&!Scribd.ReadingProgress.external_progress_notice_seen?(Scribd.ReadingProgress.external_progress_notice_seen=!0,Scribd.Flasher.standard("notice",this.external_progress_notification_message(t)),e=Scribd.current_doc.is_sheet_music?"sheet music":"book",$(document.body).track_rats("reading_progress:progress_moved:show",{doc_id:Scribd.current_doc.id,destination_offset:t.offset,offset_type:t.offset_type,document_type:e})):void 0},t.prototype.update_external_progress=function(t){return this.has_external_progress(t)?$(window).trigger("scribd:external_reading_progress",t):void 0},t.prototype.get=function(){return $.get(this.url,{doc_id:this.doc_id},function(t){return function(e){return t.update_external_progress(e.progress)}}(this))},t.prototype.post=function(){var t;return t=Scribd.CSRF.with_token({doc_id:this.doc_id,offset:this.offset,offset_type:this.offset_type,percentage:this.percentage}),$.post(this.url,t,function(t){return function(e){return t.update_external_progress(e.progress)}}(this))},t}()}).call(this),(Scribd.translations=Scribd.translations||[]).push({en_US:{shared:{reading_progress:{base:{we_ve_moved_you_to_where_you:"We've moved you to where you read on your %{progress_device_name}"}}}}});


/* app/views/pdfs/_sidebar.coffee @ 1500067086 */
(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Scribd.PdfsSidebar=function(){function e(e,n){null==n&&(n={}),this.track_interests=t(this.track_interests,this),this.container=$(e),this.track_interests(),"left"===n.side&&this.container.find(".document_cell").addClass("no_hovercard"),this.container.dispatch("click",{toggle_details_btn:function(t){return function(){return t.container.toggleClass("details_open"),docManager?(docManager._updatePageBoundingRects(),docManager._currentViewManager.checkAndUpdateVisiblePages()):void 0}}(this),interest_link:function(){return function(t){return $(document.body).track_rats("doc:interests:click",{interest:{id:t.data("category_id"),name:t.text()}}),"continue"}}(this),see_more_btn:function(t){return function(){return $(document.body).track_rats("doc:more_information_button:click",{action:"show"}),Scribd.Lightbox.open_react("description_lightbox",Scribd.R.Pdfs.Lightboxes.DescriptionLightbox({description_content:t.container.find(".full_description").html()}))}}(this)})}return e.prototype.track_interests=function(){var t,e;return e=function(){var e,n,i,r;for(i=this.container.find(".interest_link"),r=[],e=0,n=i.length;n>e;e++)t=i[e],t=$(t),r.push({id:t.data("category_id"),name:t.text()});return r}.call(this),e.length?$(document.body).track_rats("doc:interests:show",{interests:e}):void 0},e}()}).call(this),(Scribd.translations=Scribd.translations||[]).push({en_US:{pdfs:{sidebar:{download:"Download",resume:"Resume",read_all:"Read all",buy_paid_document_price_currency:"Buy %{paid_document_price_currency}",edit_document:"Edit document",by:"by",embed:"Embed",read_anywhere_with_the_scribd_app:"Read anywhere with the Scribd app",description:"Description:",read_on_scribd_mobile:"Read on Scribd mobile:",iphone:"iPhone",ipad:"iPad",and:"and",android:"Android",copyright:"Copyright:",list_price:"List price:",flag_for_inappropriate_content:"Flag for inappropriate content",show_more:"Show more",more_information:"More information",show_less:"Show less",interests:"Interests:",view:"view",strong_download_strong_as_available_extensions_map_upcase_join_or_read_online:"<strong>Download</strong> as %{available_extensions_map_upcase_join} or read online from Scribd",related_interests:"Related interests",download_with_free_trial:"Download With Free Trial",download_this_document:"Download This Document",isbn:"ISBN:",written_by:"Written by",uploaded_by:"Uploaded by",on:"on",view_more:"View More",related_interests_:"Related Interests",rating_and_stats:"Rating and Stats",document_actions:"Document Actions",share_or_embed_document:"Share or Embed Document"}}}});


/* app/views/pdfs/_document_details.coffee @ 1500067086 */
(function(){}).call(this),(Scribd.translations=Scribd.translations||[]).push({en_US:{pdfs:{document_details:{more_info:"More info",less_info:"Less info"}}}});


/* app/views/pdfs/errors/deleted.coffee @ 1500067086 */
(function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Scribd.PdfsDeleted=function(e){function n(){n.__super__.constructor.apply(this,arguments),this.fit_to_width(),Scribd.hook_tooltips(this.container),this.container.find("[data-default_text]").placeholder_text(),new Scribd.UI.FilteredDocumentPage(this.container)}return t(n,e),n}(Scribd.UI.ObjectGrid)}).call(this),(Scribd.translations=Scribd.translations||[]).push({en_US:{pdfs:{errors:{deleted:{notice:"Notice",your_document_was_successfully_expired:"Your document was successfully expired.",go_to_uploads_187:"Go to Uploads &#187;",why:"Why?",your_document_was_successfully_deleted:"Your document was successfully deleted.",this_document_has_been_removed_from:"This document has been removed from Scribd.",reading_suggestions:"Reading suggestions",the_document_strong_document_title_strong_is_no_longer_html:"The document <strong>%{document_title}</strong> is no longer available on Scribd.",the_document_strong_document_title_strong_has_been_deleted_html:"The document <strong>%{document_title}</strong> has been deleted.",the_document_strong_document_title_strong_has_been_automatically:"The document <strong>%{document_title}</strong> has been automatically removed by <a href='%{bookid_url}'>BookID</a>, Scribd\u2019s copyright protection system.",like_all_automated_systems_bookid_sometimes:"Like all automated systems, BookID sometimes makes mistakes. If you believe this document is not infringing and was removed in error, please contact <a href='mailto:copyright@scribd.com'>copyright@scribd.com</a>.",please_see_scribd_s_a_href_copyright_url_copyright_resource:"Please see Scribd's <a href='%{copyright_url}'>Copyright Resource Center</a> to learn more."}}}}});


/* app/views/pdfs/errors/unconverted.coffee @ 1500067086 */
(function(){Scribd.UnconvertedDocument=function(){function t(t){this.container=$(t),this.container.dispatch("click",{download_btn:function(){return function(t){var e,n;return n=t.data("download_url"),e=t.data("document_id"),Scribd.Lightbox.show_loading(),Scribd.download_actions.download(e,"read","unconverted pdf",function(){return $.post(n).done(function(t){return t.props.download_url=n,Scribd.Lightbox.open_react("document_download_lb",Scribd.R.Pdfs.Lightboxes.DownloadLightbox(t.props))})})}}(this)})}return t}()}).call(this),(Scribd.translations=Scribd.translations||[]).push({en_US:{pdfs:{errors:{unconverted:{this_document_is_being_prepared:"This document is being prepared",the_scribd_version_of_this_document:"The Scribd version of this document is currently being processed, and will be available shortly.",ahead_of_this_document_in_the:" ahead of this document in the queue.)",we_could_not_convert_this_document:"We could not convert this document",we_re_unable_to_display_this_document:"We're unable to display this document and there are no formats available for download.",download_to_view_this_document:"Download to view this document",we_re_unable_to_display_this_document_:"We're unable to display this document. To view it, download it in its original format.",formats_available_document_currently_downloadable_extensions_join_upcase:"Formats available: %{document_currently_downloadable_extensions_join_upcase}",download:"Download"}}}}});


/* app/views/pdfs/lightboxes/_description_lightbox.coffee @ 1500067086 */
(function(){var t,e,n,i,r;i=React.DOM,n=i.h1,e=i.div,t=Scribd.R.component_builder("Pdfs.Lightboxes.DescriptionLightbox",{css_class:"autogen_class_views_pdfs_lightboxes_description_lightbox"}),r=React.PropTypes,t({propTypes:{description_content:r.string},enclosing_element_type:function(){return Scribd.R.Shared.Lightbox},componentDidMount:function(){return this.container().dispatch("click",{flag_document_btn:function(){return function(t){return Scribd.pdfs_show.flag_document(t.attr("lightbox_url"))}}(this)})},render:function(){return[n({},I18n.t("pdfs.lightboxes.description_lightbox.description")),e({dangerouslySetInnerHTML:{__html:this.props.description_content}})]}})}).call(this),(Scribd.translations=Scribd.translations||[]).push({en_US:{pdfs:{lightboxes:{description_lightbox:{description:"Description"}}}}});


/* app/views/pdfs/lightboxes/_download_lightbox.coffee @ 1500067086 */
(function(){var t,e,n,i,r,o,s,a,c,l,u=function(t,e){function n(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty;a=React.DOM,s=a.p,i=a.em,n=a.div,c=a.span,o=a.label,r=a.input,t=a.a,e=Scribd.R.component_builder("Pdfs.Lightboxes.DownloadLightbox",{css_class:"autogen_class_views_pdfs_lightboxes_download_lightbox",track_category:"download_dialog"}),l=React.PropTypes,e({propTypes:{show_paywall:l.bool,archive_url:l.string,base_url:l.string,recommendation_html:l.string,download_url:l.string,document:l.shape({secret_password:l.string}).isRequired,filename:l.string.isRequired,formats:l.arrayOf(l.shape({extension:l.string,filesize:l.string})).isRequired},enclosing_element_type:function(){return function(t){return function(e){return Scribd.R.Shared.Lightbox($.extend({title:t.state.download_started?void 0:I18n.t("pdfs.lightboxes.download_lightbox.download_document")},e))}}(this)},getInitialState:function(){var t;return{selected_extension:null!=(t=this.props.formats[0])?t.extension:void 0,formats:this.props.formats,download_started:!1,nag:this.props.nag}},componentLightboxShow:function(){return this.setState({download_started:!1})},componentDidMount:function(){return this.container().on("Scribd:lightbox:closed",function(){return function(){return $(document.body).track_rats("doc:download_modal:hide")}}(this))},componentDidUpdate:function(t,e){var n;return!e.download_started&&this.state.download_started?new(n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.min_spacing=20,e.prototype.min_min_spacing=20,e.prototype.margin=10,e}(Scribd.UI.ObjectGrid))(this.container().find(".document_grid")):void 0},widget_css_classes:function(t){return classNames(t,"lightbox")},do_download:function(){var t;return $(document.body).track_rats("doc:final_download_button:click",{format:this.state.selected_extension}),t=this.props.show_paywall?this.props.archive_url:$.param.querystring(this.props.base_url,{secret_password:this.props.document.secret_password,extension:this.state.selected_extension}),setTimeout(function(){return window.location=t},200)},render:function(){var t;return(null!=(t=this.state.nag)?t.paused:void 0)?this.render_paused():this.state.download_started?this.render_after_download():this.render_downloader()},render_paused:function(){return[s({children:[I18n.t("pdfs.lightboxes.download_lightbox.your_membership_is_currently_paused_until",{state_nag_next_payment_due:this.state.nag.next_payment_due})+" ",i({},this.props.document.title),"?"]}),n({className:"buttons",children:[this.state.loading?void 0:this.common_button({href:"javascript:void(0)",className:"outline_btn button_sub_action",onClick:function(){return function(t){return t.preventDefault(),Scribd.Lightbox.close()}}(this)},I18n.t("pdfs.lightboxes.download_lightbox.no_thanks"))," ",this.common_button({className:classNames({disabled:this.state.loading}),disabled:this.state.loading,onClick:function(t){return function(e){return e.preventDefault(),t.setState({loading:!0}),t.unpause_account()}}(this)},I18n.t(this.state.loading?"pdfs.lightboxes.download_lightbox.resuming":"pdfs.lightboxes.download_lightbox.resume_membership"))]})]},unpause_account:function(){return $.getJSON(this.state.nag.fix_url).fail(function(t){return function(){return window.location=t.state.nag.fix_url}}(this)).done(function(t){return function(){return $(document.body).trigger("scribd:unpause_account"),$.post(t.props.download_url).done(function(e){var n;return t.setState({nag:null,loading:!1,just_resumed:!0,selected_extension:null!=(n=e.props.formats[0])?n.extension:void 0,formats:e.props.formats})})}}(this))},render_downloader:function(){return[this.state.just_resumed?s({},I18n.t("pdfs.lightboxes.download_lightbox.your_membership_has_been_resumed")):void 0,this.render_current_format(),this.render_format_picker(),n({className:"buttons"},this.common_button({onClick:function(t){return function(){return t.do_download(),t.setState({download_started:!0})}}(this)},I18n.t("pdfs.lightboxes.download_lightbox.download_current_format_extension",{current_format_extension:this.current_format().extension})))]},current_format:function(){return _.find(this.state.formats,function(t){return function(e){return e.extension===t.state.selected_extension}}(this))},render_current_format:function(){var t;return t=this.current_format(),n({className:"document_data",children:[n({className:"data_row",children:[I18n.t("pdfs.lightboxes.download_lightbox.file_name")+" ",c({className:"data_value"},this.props.filename+"."+t.extension)]}),n({className:"data_row",children:[I18n.t("pdfs.lightboxes.download_lightbox.file_size")+" ",c({className:"data_value"},t.filesize)]})]})},render_format_picker:function(){return 1!==this.state.formats.length?n({className:"format_picker",children:this.state.formats.map(function(t){return function(e){return n({className:"format_row"},o({children:[r({type:"radio",name:"download_extension",checked:e.extension===t.state.selected_extension,value:e.extension,onChange:function(){return t.setState({selected_extension:e.extension})}})," "+e.extension.toUpperCase()]}))}}(this))}):void 0},render_after_download:function(){return[n({className:"primary_message",children:[I18n.t("pdfs.lightboxes.download_lightbox.your_download_has_started")+" ",t({href:"javascript:void(0)",onClick:function(){return function(){return Scribd.Lightbox.close()}}(this)},I18n.t("pdfs.lightboxes.download_lightbox.close_this_dialog"))]}),n({className:"secondary_message",children:[I18n.t("pdfs.lightboxes.download_lightbox.having_trouble_downloading")+" ",t({href:"javascript:void(0)",onClick:function(t){return function(){return t.setState({download_started:!1})}}(this)},I18n.t("pdfs.lightboxes.download_lightbox.try_again"))]}),this.props.recommendation_html?n({key:"recommendations",className:"rec_wrapper",dangerouslySetInnerHTML:{__html:this.props.recommendation_html}}):void 0]}})}).call(this),(Scribd.translations=Scribd.translations||[]).push({en_US:{pdfs:{lightboxes:{download_lightbox:{download_document:"Download document",your_membership_is_currently_paused_until:"Your membership is currently paused until %{state_nag_next_payment_due}. Would you like to resume your membership now to download",no_thanks:"No Thanks",resuming:"Resuming",resume_membership:"Resume Membership",your_membership_has_been_resumed:"Your membership has been resumed.",download_current_format_extension:"Download %{current_format_extension}",file_name:"File name:",file_size:"File size:",your_download_has_started:"Your download has started.",close_this_dialog:"Close this dialog",having_trouble_downloading:"Having trouble downloading?",try_again:"Try again",similar_to_document_pretty_title:"Similar to %{document_pretty_title}.",check_out_more_from:"Check out more from"}}}}});


/* app/views/pdfs/lightboxes/embed_lightbox.coffee @ 1500067086 */
(function(){Scribd.UI||(Scribd.UI={}),Scribd.UI.CustomSize=function(){function t(t,e,n){_.bindAll(this),this.embed_ui=t,this.container=$(e),this.book_mode=!1,this.options=_.extend({min_width:400,min_height:300,aspect_ratio:.75},n||{}),this.lock_aspect_ratio=!0,this.width_input=this.container.find(".custom_width"),this.height_input=this.container.find(".custom_height"),this.update_from_width=this.updater_for("width"),this.update_from_height=this.updater_for("height"),this.width_input.on("change",this.update_from_width),this.height_input.on("change",this.update_from_height),this.lock_button=this.container.find(".lock_button"),this.lock_button.on("click",function(t){return function(){return t.lock_button.toggleClass("unlocked"),t.lock_aspect_ratio=!t.lock_aspect_ratio,t.lock_aspect_ratio&&0===!t.width_input.val().length?t.update_from_width():void 0}}(this))}return t.prototype.values=function(){return[parseInt(this.width_input.val(),10),parseInt(this.height_input.val(),10)]},t.prototype.has_values=function(){return 0===!this.width_input.val().length&&0===!this.height_input.val().length},t.prototype.updater_for=function(t){var e,n,i,r,o,s;return r="width"===t?"height":"width",e=this.options.aspect_ratio,"height"===t&&(e=1/e),n=this[t+"_input"],o=this[r+"_input"],i="min_"+t,s="min_"+r,function(a){return function(){var c,l;if(0!==n.val().length)return a.book_mode&&(e=1/e),l=parseInt(n.val(),10),l<a.options[i]&&(l=a.options[i],n.val(l)),c=void 0,a.lock_aspect_ratio||0===o.val().length?(c=Math.max(Math.floor(l/e),a.options[s]),o.val(c)):c=a.embed_ui.custom_options[r],"width"===t?a.embed_ui.set_size(l,c):a.embed_ui.set_size(c,l)}}(this)},t}(),Scribd.UI.EmbedDialog=function(){function t(t){var e,n;_.bindAll(this),this.container=$(t),this.document=this.container.data("document"),(e=this.document).aspect_ratio||(e.aspect_ratio=.75),this.options={num_pages:this.document.page_count,aspect_ratio:this.document.aspect_ratio,doc_url:this.document.url,title:this.document.title,user_url:this.document.word_user.url,user_title:this.document.word_user.name,doc_id:this.document.id,access_key:this.document.access_key,secret_password:this.document.secret_password},this.input=this.container.find(".code_input"),this.preview_container=this.container.find(".doc_preview"),this.custom_options={},this.generators={html:new Scribd.Embed.HTML5CodeGenerator(_.clone(this.options)),wordpress:new Scribd.Embed.WordpressCodeGenerator(_.clone(this.options))},this.container.find(".content").css("padding",0),this.starting_page=this.container.find(".misc_options .starting_page"),this.container.find(".custom_size input").add(this.starting_page).restrict_numeric({allow_period:!1}),this.custom_size=new Scribd.UI.CustomSize(this,this.container.find(".custom_size")),this.starting_page.on("change",function(t){return function(){var e,n;return n=0===t.starting_page.val().length?1:parseInt(t.starting_page.val(),10),e=t.options.num_pages,null!==e&&0!==e&&n>e&&(n=e,t.starting_page.val(n)),t.custom_options.page=n,t.update_code()}}(this)),this.container.on("change",".view_style",function(t){return function(e){var n;return n=$(e.currentTarget).val(),t.custom_options.mode=n,t.update_code()}}(this)),this.input.select_on_focus(),this.container.find(".include_link_input").on("change",function(t){return function(e){return t.custom_options.show_title=$(e.target).prop("checked"),t.update_code(),!0}}(this)),this.container.find(".include_recommendations_input").on("change",function(t){return function(e){return t.custom_options.show_recommendations=$(e.target).prop("checked"),t.update_code(),!0}}(this)),this.container.on("click",".close",function(){return function(){return Scribd.Lightbox.close()}}(this)),this.container.on("click","#embed_format",function(t){return function(e){var n;return n=$(e.target),n.hasClass("inactive")?(n.removeClass("inactive"),t.container.find(".option.active").removeClass("active").addClass("inactive"),n.addClass("active"),t.update_format(n.data("format"))):void 0}}(this)),n=this.container.find(".size_picker"),n.find("li").on("click",function(t){return function(e){var i,r,o,s,a;return r=$(e.target).parent("li").andSelf().filter("li"),r&&(n.find("li").removeClass("active"),r.addClass("active"),s=r.data("size"),s?(a=null,i=null,o=s.match(/(\d+)x(\d+)/),o&&(a=o[1],i=o[2]),t.set_size(a,i)):t.custom_size.has_values()&&t.set_size.apply(t,t.custom_size.values())),!1}}(this)),this.update_format("html"),this.setup_copy_link()}return t.prototype.set_size=function(t,e){return t!==this.custom_options.width||e!==this.custom_options.height?(this.custom_options.width=t,this.custom_options.height=e,this.custom_options.auto_width=!t,this.custom_options.auto_height=!e,this.update_code()):void 0},t.prototype.update_format=function(t){return this.current_format=t,this.update_code()},t.prototype.update_code=function(t){var e;return"book"===this.custom_options.mode?this.showing_book||(this.showing_book=!0,this.custom_size.book_mode=!0,this.toggle_sizes()):this.showing_book&&(this.showing_book=!1,this.custom_size.book_mode=!1,this.toggle_sizes()),this.input.val(this.generators[this.current_format].render(this.custom_options)),e=this.generators.html.render(),this.preview_container.show().html(e),_.defer(function(t){return function(){var e;return t.custom_options.auto_height&&t.custom_options.auto_width?(e={width:t.preview_container.width(),height:t.preview_container.height()},t.preview_container.find(".scribd_iframe_embed").css(e)):void 0}}(this)),t?void 0:this.flash()},t.prototype.toggle_sizes=function(){return $(".size_picker:first").children().toggleClass("hidden"),$(".custom_size:first").removeClass("hidden")},t.prototype.flash=function(){var t;return t=this.container.find(".tab_bodies input").flash()},t.prototype.setup_copy_link=function(){var t,e,n,i;return t=this.container.find(".copy_link"),i=t.find(".document_url_input"),e=t.find("form"),i.on("click",function(){return function(){return i[0].select()}}(this)),("undefined"!=typeof docManager&&null!==docManager?docManager.firstVisiblePage:void 0)||t.find(".position_picker").remove(),n=function(t){return function(){var n,r,o,s,a,c,l,u,d;for(s={},c=e.serializeArray(),n=0,r=c.length;r>n;n++)l=c[n],o=l.name,d=l.value,s[o]=d;return a={},"current"===s.doc_position&&(a.page=docManager.firstVisiblePage.pageNum),s.fullscreen&&(a.fullscreen=1),u=t.options.doc_url,$.isEmptyObject(a)||(u+="#"+$.param(a)),i.val(u)}}(this),e.on("change",function(){return function(){return n()}}(this)),n()},t}()}).call(this),(Scribd.translations=Scribd.translations||[]).push({en_US:{pdfs:{lightboxes:{embed_lightbox:{custom:"Custom",width:"Width: ",height:"Height: ",select:"Select",slideshow:"Slideshow",scroll:"Scroll",include_link:"Include link",include_recommendations:"Include Recommendations",embed:"Embed",embed_this_in_your_website:"Embed this in your website",sup_sup_the_code_will_be_updated:"<sup>*</sup> The code will be updated based on your changes.",format:"Format",customize_for:"Customize for:",html:"HTML",wordpress:"Wordpress",size:"Size",options:"Options",copy_link:"Copy Link",beginning_of_document:"Beginning of document",current_page:"Current page",fullscreen:"Fullscreen",start_at_page:"Start at page:",style:"Style:",autosize:"Autosize"}}}}});


/* app/views/pdfs/lightboxes/flag_doc_lightbox.coffee @ 1500067086 */
(function(){Scribd.FlagDocDialog=function(){function t(t){this.container=$(t).on("submit",function(t){return function(){return t.container.addClass("loading")}}(this)).on("ajax:complete",function(t){return function(){return t.container.removeClass("loading"),Scribd.Lightbox.close()}}(this))}return t}()}).call(this),(Scribd.translations=Scribd.translations||[]).push({en_US:{pdfs:{lightboxes:{flag_doc_lightbox:{report_this_document:"Report this Document",please_tell_us_reason_s_for_reporting:"Please tell us reason(s) for reporting this document",if_you_are_the_copyright_owner:"If you are the copyright owner of this document and want to report it, please follow ",these_directions:"these directions",to_submit_a_copyright_infringement_notice:" to submit a copyright infringement notice.",cancel:"Cancel",submit:"Submit"}}}}});


/* app/views/pdfs/lightboxes/_print_lightbox.coffee @ 1500067086 */
(function(){var t,e,n,i,r;i=React.DOM,n=i.p,e=i.div,t=Scribd.R.component_builder("Pdfs.Lightboxes.PrintLightbox",{css_class:"autogen_class_views_pdfs_lightboxes_print_lightbox",track_category:"print_dialog"}),r=React.PropTypes,t({propTypes:{download_fn:r.func.isRequired},enclosing_element_type:function(){return function(){return function(t){return Scribd.R.Shared.Lightbox($.extend({title:I18n.t("pdfs.lightboxes.print_lightbox.print_document")},t))}}(this)},render:function(){return[n({},I18n.t("pdfs.lightboxes.print_lightbox.in_order_to_print_this_document")),e({className:"buttons"},this.common_button({className:"download_btn",onClick:this.props.download_fn},I18n.t("pdfs.lightboxes.print_lightbox.download_and_print")))]}})}).call(this),(Scribd.translations=Scribd.translations||[]).push({en_US:{pdfs:{lightboxes:{print_lightbox:{print_document:"Print document",in_order_to_print_this_document:"In order to print this document from Scribd you'll first need to download it.",download_and_print:"Download and print"}}}}});


/* app/views/pdfs/_seo_lightbox.coffee @ 1500067086 */
(function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Scribd.SeoLightbox=function(e){function n(){n.__super__.constructor.apply(this,arguments),this.setup_carousel(this.container.find(".seo_images")),this.setup_events(),this.setup_signup()}return t(n,e),n.prototype.setup_carousel=function(t){var e;return t=$(t),e=$("<div class='scroller'></div>"),e.append(t.children().detach()),t.append(e)},n.prototype.setup_events=function(){return this.variation=Scribd.SeoShared.seo_variation(),this.container.attr("data-track_category","seo_lightbox:"+this.variation),this.container.dispatch("click",{close_button:function(t){return function(){return t.close()}}(this),start_trial_btn:function(t){return function(){return t.start_trail()}}(this)}),this.container.on("Scribd:lightbox:closed",function(t){return function(){return t.container.track({action:"close",label:"close"})}}(this)),this.container.on("Scribd:Facebook:login_success",function(t){return function(){return Scribd.Lightbox.open("login_successful_lb"),t.redirect_to_billing()}}(this)),this.container.on("scribd:signup_error:email_taken",function(t){return function(){return t.signup.find(".signup .input_error").text(I18n.t("pdfs.seo_lightbox.that_email_is_already_taken")),t.signup.find(".signup .email_input").addClass("input_err field_err")}}(this)),this.container.track({action:"show",label:"show"})},n.prototype.setup_signup=function(){return this.signup=this.container.find(".seo_signup"),0===this.signup.length?void(this.signup=null):(this.signup.html(this.signup.html().replace(/DocPromoOne/g,this.campaign())),new Scribd.LoginForms(this.signup),new Scribd.FacebookLoginButton(this.signup.find(".facebook_login_button")))},n.prototype.campaign=function(){switch(this.variation){case"control":case"new_control":return"DocPromoOne";case"new_basic":return"DocPromoTwo";case"new_doc_only_subscribe":return"DocPromoFour";case"new_doc_only_archive":return"DocPromoFive"}},n.prototype.redirect_to_subscribe=function(){var t,e,n,i;return t=this.campaign(),this.variation.match(/archive/)?(e=encodeURIComponent(JSON.stringify({page:"archive_plans",context:"archive",action:t,logged_in:Scribd.logged_in,platform:"web"})),window.open("/archive/plans?metadata="+e+"&doc="+(null!=(n=Scribd.current_doc)?n.id:void 0))):window.open("/subscribe?action="+t+"&doc_id="+(null!=(i=Scribd.current_doc)?i.id:void 0))},n.prototype.redirect_to_billing=function(){return window.location=this.signup.find('[name="login_params[next_url]"]').val()},n.prototype.show_signup=function(){return this.signup.addClass("open"),setTimeout(function(t){return function(){return t.signup.find(".signup .username_input").focus()}}(this),200)},n.prototype.start_trail=function(){return $(document.body).track_rats("doc:subscribe_button:click",{location:"lightbox"}),null!=this.signup?Scribd.logged_in?this.redirect_to_billing():this.show_signup():this.redirect_to_subscribe()},n}(Scribd.Lightbox)}).call(this),(Scribd.translations=Scribd.translations||[]).push({en_US:{pdfs:{seo_lightbox:{that_email_is_already_taken:"That email is already taken.",join_the_membership:"Join the membership",for_readers:"for readers",get_monthly_access_to_books_audiobooks:"Get monthly access to books, audiobooks, documents, <br />and more"}}}});


/* app/views/pdfs/show.coffee @ 1500067086 */
(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};Scribd.Ads={addBetweenPageUnit:function(){}},t=function(t,e){var n;return n=navigator.platform.match(/Mac/),$(document).keydown(function(){return function(i){return i.keyCode===t.charCodeAt(0)&&(n&&i.metaKey||!n&&i.ctrlKey)?e(i):void 0}}(this))},Scribd.PdfsShow=function(){function n(t,n){var i;this.opts=n,this.setup_inview_tracking=e(this.setup_inview_tracking,this),this.track_performance=e(this.track_performance,this),this.container=$(t),this.setup_events(),this.fullscreen=!1,this.document=$.extend(this.opts.document,{total_pages:this.get_highest_page()}),this.render(),this.setup_sharing(),window.docManager&&(this.highlighter=new Scribd.PdfHighlighter(this.container)),this.setup_sizing(),this.fetch_data(),this.setup_sticky_footer(),this.setup_seo_roadblock(),this.setup_embed_referral(),this.setup_print_detection(),this.setup_find_hotkey(),this.setup_buy_manager(),this.track_performance(),this.send_tracking(),this.setup_inview_tracking(),this.setup_fullscreen_btn(),this.setup_reading_progress(),this.setup_flash(),this.fix_ie_10_viewport(),Scribd.hook_tooltips(this.container.parent()),i=window.location.hash.match(/\bdownload\b/)||window.location.search.match(/\bdownload\b/),i&&Scribd.Lightbox.ready.done(function(t){return function(){return _.defer(function(){return t.download_document("url")})}}(this)),$(document.body).on("scribd:credit_redeemed",function(){return document.location.reload()})}return n.min_zoom=.3,n.max_zoom=3,n.prototype.fix_ie_10_viewport=function(){var t;return t=$(".global_wrapper"),t.css("height","calc(100vh - "+(t.position().top+"px")+")")},n.prototype.add_space_for_non_dismissable_flashes=function(){var t,e;return t=this.container.find(".document_scroller"),t.css({marginTop:0}),$(document.body).hasClass("pdf_fullscreen")||$(document.body).hasClass("pdf_mobile")?(e=0,$(Scribd.Flasher.global_container()).find(".flash.non_dismissible").each(function(){return e+=$(this).height()}),t.css({marginTop:e})):void 0},n.prototype.setup_flash=function(){return $(document.body).on("scribd:standard_flash:animation_enter scribd:standard_flash:animation_leave",function(t){return function(){return t.add_space_for_non_dismissable_flashes(),t.fix_ie_10_viewport()}}(this))},n.prototype.track_performance=function(){return $(window).on("load",function(){return function(){return window.performance?_.defer(function(){var t,e,n;return t=performance.timing.domInteractive-performance.timing.navigationStart,e=performance.timing.loadEventEnd-performance.timing.navigationStart,n=performance.timing.loadEventEnd-performance.timing.responseEnd,$(document.body).track_rats("doc:performance",{dom_interactive:t,load_event_end:e,response_end:n})}):void 0}}(this))},n.prototype.setup_sizing=function(){var t,e,n;if(window.docManager)return t=this.container.find(".document_scroller"),n=$(window),e=60,this.update_page_width=function(i){return function(){var r,o;return e=n.width()<=600?30:60,r=i.fullscreen?1300:1e3,o=Math.min(r,t.width()-e),docManager.view_manager_deferred.then(function(){var t;return DocumentManager.scrollParent?"undefined"!=typeof docManager&&null!==docManager&&null!=(t=docManager._currentViewManager)?t._setWidth(o):void 0:(docManager._currentViewManager._currentPageWidth=o,docManager._currentViewManager._updatePageWidths())})}}(this),this.refresh_pages=function(t){return function(){return t.update_page_width(),setTimeout(function(){return docManager._updatePageBoundingRects(),docManager._currentViewManager.checkAndUpdateVisiblePages()},100)}}(this),this.update_page_width(),$(window).on("resize",_.debounce(function(t){return function(){return t.update_page_width()}}(this),20))},n.prototype.send_tracking=function(){return this.opts.pmp_data&&"function"==typeof $rat&&$rat("pmp_read",this.opts.pmp_data),"function"==typeof $rat&&$rat("doc_view_mode",{value:"doc_view_mode",doc_id:Scribd.current_doc.id}),"undefined"!=typeof $rat&&null!==$rat&&$rat.root().flushEvents(),this.opts.pingback_url?Scribd.send_pingback(this.opts.pingback_url):void 0},n.prototype.setup_inview_tracking=function(){var t,e,n,i;return t={".page_missing_explanation":"doc:read_full_version_link:show",".page_blur_promo":"doc:free_preview_blur_button:show"},i=function(e){return function(n){var i,r,o;r=[];for(o in t)if(n.closest(o).length&&(i=t[o])){delete t[o],$(document.body).track_rats(i,{doc_id:e.document.id});break}return r}}(this),n=this.container.find(".document_scroller"),e=_.throttle(function(r){return function(){var o,s,a,c,l,u,d,h,p;if($.isEmptyObject(t))return void n.off("scroll",e);if(h=function(){var t,e,n,i;for(n=this.container.find(".missing_page_buy_button"),i=[],t=0,e=n.length;e>t;t++)s=n[t],s=$(s),s.data("tracked")||i.push(s);return i}.call(r),h.length){for(p=n.offset().top,o=p+n.height(),d=[],l=0,u=h.length;u>l;l++)s=h[l],c=s.offset().top,a=c+s.height(),o>c&&a>p?(s.data("tracked",!0),d.push(i(s))):d.push(void 0);return d}}}(this),400),n.on("scroll",e)},n.prototype.fetch_data=function(){var t,e;return t=$(document.body),e=this.opts.data_url,_.isArray(e)&&(e=e.join("")),$.get(e).done(function(){return function(e){return t.toggleClass("buy_disabled",!!e.disabled_store_sale&&Scribd.current_doc.is_paid),t.toggleClass("pmp_disabled",!!e.disabled_pmp_sale&&Scribd.current_doc.is_pmp)}}(this))},n.prototype.setup_sticky_footer=function(){var t,e;return t=this.container.find(".document_footer"),t.length?(e=t.closest(".document_scroller"),e.on("scroll",function(){return function(){return t.css({marginLeft:e.scrollLeft()+"px"})}}(this))):void 0},n.prototype.setup_sharing=function(){var t,e,n,i,r,o;o=this.container.find(".sharing_buttons"),n=o.data("sharing_opts"),new Scribd.SharingButtons(o,n),r={"scribd:share:email":"doc:share_via_email_button:click","scribd:share:facebook":"doc:share_via_facebook_button:click","scribd:share:twitter":"doc:share_via_twitter_button:click","scribd:share:googleplus":"doc:share_via_googleplus_button:click","scribd:share:pinterest":"doc:share_via_pinterest_button:click","scribd:share:linkedin":"doc:share_via_linkedin_button:click"},e=function(t){return function(e,n){return t.container.on(e,function(){return $(document.body).track_rats(n)})}}(this);for(t in r)i=r[t],e(t,i);return this.container.dispatch("click",{embed_btn:function(){return function(t){return $(document.body).track_rats("doc:embed_button:click"),Scribd.Lightbox.remote_open("embed_dialog",t.data("lightbox_url"))}}(this),flag_document_btn:function(t){return function(e){return t.flag_document(e.data("lightbox_url"))}}(this)})},n.prototype.setup_find_hotkey=function(){return t("F",function(t){return function(){var e;return e=t.toolbar.container().find(".search_input"),e.length?(e.focus(),!1):void 0}}(this))},n.prototype.setup_print_detection=function(){var e;if(Scribd.current_doc.downloadable_for_premium_users)return"function"==typeof window.matchMedia&&window.matchMedia("print").addListener(_.debounce(function(t){return function(){return t.print_document()}}(this),3e3,!0)),e=window.onbeforeprint,window.onbeforeprint=function(t){return function(){return t.print_document(),"function"==typeof old_onbeforeprint&&old_onbeforeprint(),!1}}(this),t("P",function(t){return function(){return t.print_document(),!1}}(this))},n.prototype.get_highest_page=function(){var t,e,n;if(!window.docManager)return 0;if(t=null!=(n=Scribd.current_doc)?n.page_count:void 0,!t){t=0;for(e in docManager.pages)t=Math.max(t,e)}return t},n.prototype.render=function(){return window.docManager?(this.current_zoom=docManager._currentViewManager._currentZoomMultiplier,this.render_toolbar(),this.toggle_fullscreen()):void 0},n.prototype.toggle_fullscreen=function(){return this.container.toggleClass("fullscreen",this.fullscreen),$(document.body).toggleClass("pdf_fullscreen",this.fullscreen),this.add_space_for_non_dismissable_flashes()},n.prototype.render_toolbar=function(){return this.toolbar_drop||(this.toolbar_drop=this.container.find(".toolbar_drop")),this.toolbar=ReactDOM.render(Scribd.R.Pdfs.Toolbar({document:this.document,fullscreen:this.fullscreen||!1,mobile:!!this.opts.single_column,current_zoom:this.current_zoom,current_page:this.current_page||1,search_results:this.search_results,highlight_callback:function(t){return function(e,n){return t.highlighter.clear(),t.highlighter.highlight_from_results(e,n)}}(this)}),this.toolbar_drop[0])},n.prototype.setup_app_download_link_in_viewport_tracking=function(){return $(".download_app_promo_lightbox").one("inview",function(t,e){return e?$(this).track_rats("download_app_promo:text_link:view",{doc_id:Scribd.current_doc.id}):void 0})},n.prototype.setup_events=function(){var t,e,n,i;return this.opts.responsive_doc_reader&&Scribd.nway_test_force_group("responsive_doc_reader",this.opts.responsive_doc_reader,"responsive_doc_reader"),this.setup_app_download_link_in_viewport_tracking(),t={},_.delay(function(t){return function(){return t.time_limit_past_for_upvote=!0}}(this),6e4),e=_.once(function(){return function(){return $(document).trigger("scribd:upvote_popover:show")}}(this)),n=_.once(function(){return function(){return $(document).trigger("scribd:upvote_popover:show")}}(this)),"undefined"!=typeof docManager&&null!==docManager&&docManager.addEvent("visiblePagesChanged",function(i){return function(r){var o,s,a,c,l,u,d,h;for(o=function(e){return setTimeout(function(){return t[e.pageNum]=!1},500)},d=[],a=0,c=r.length;c>a;a++)u=r[a],t[u.pageNum]||(t[u.pageNum]=!0,h=i.document.total_pages<=10&&u.pageNum===i.document.total_pages,l=i.document.total_pages>10&&u.pageNum>=5,s=i.document.total_pages>10&&u.pageNum===i.document.total_pages,(h||l)&&i.time_limit_past_for_upvote&&e(),s&&i.time_limit_past_for_upvote&&n(),o(u),d.push("function"==typeof $rat?$rat("doc:page:show",{page:u.pageNum,of:i.document.total_pages}):void 0));return d}}(this)),"undefined"!=typeof docManager&&null!==docManager&&docManager.addEvent("expectedFirstPageChanged",function(t){return function(e){var n;return t.current_page=e,t.render(),(n=t.going_to_page)?(delete t.going_to_page,n.to_page=""+e,$(document.body).track_rats("doc:pager:engage",n)):void 0}}(this)),this.container.on("click",".trial_learn_more_btn",function(){return function(){$(document.body).track_rats("doc:subscribe_button:click",{location:"top bar banner"})}}(this)),this.container.dispatch("click",{floating_fullscreen_btn:function(t){return function(){return t.set_fullscreen(!t.fullscreen)}}(this),more_description_btn:function(t){return function(){var e;return e=t.container.find(".collapse_data"),$(document.body).track_rats("doc:more_information_button:click",{action:e.is(".show_more")?"hide":"show"}),e.toggleClass("show_more")}}(this),download_btn:function(t){return function(){return t.download_document("sidebar")}}(this),download_app_promo_lightbox:function(t){return function(){return t.container.track_rats("download_app_promo:text_link:click",{doc_id:Scribd.current_doc.id}),Scribd.Lightbox.open("app_download_promo_lightbox")}}(this),trial_learn_more_btn:function(t){return function(e){return Scribd.SignIn.open({initial_view:"join",join_type:"archive",next_url:t.opts.subscribe_url,track_location:"learn_more"},e)}}(this)}),$(document.body).on("scribd:unpause_account",function(t){return function(){return t.container.removeClass("has_toolbar_nag")}}(this)),i=function(t){return function(e){return $(document.body).track_rats("doc:zoom_"+e+"_button:click",{to_zoom_level:Math.floor(100*t.current_zoom)+"%"})}}(this),Scribd.R.dispatch(this.container,{"toolbar:goto_page":function(t){return function(e,n,i){var r,o;return null==i&&(i=!1),r=n>t.current_page?1:-1,o=docManager.getClosestPageNumber(n,r),i||(t.going_to_page={text:""+n,from_page:""+(t.current_page||1)}),docManager.gotoPage(o,{direction:r})}}(this),"toolbar:zoom_in":function(t){return function(){return t.current_zoom>=t.constructor.max_zoom?void 0:("undefined"!=typeof docManager&&null!==docManager&&docManager.zoom(1.25),t.render(),i("in"))}}(this),"toolbar:zoom_out":function(t){return function(){return t.current_zoom<=t.constructor.min_zoom?void 0:("undefined"!=typeof docManager&&null!==docManager&&docManager.zoom(.8),t.render(),i("out"))}}(this),"toolbar:download":function(t){return function(){return t.download_document(t.fullscreen?"toolbar right fullscreen":"toolbar right default")}}(this),"toolbar:print":function(t){return function(){return $(document.body).track_rats("doc:print_button:click"),t.print_document()}}(this),"toolbar:fullscreen":function(t){return function(){return $(document.body).track_rats("doc:fullscreen_button:click",{action:t.fullscreen?"exit fullscreen":"fullscreen"}),t.set_fullscreen(!t.fullscreen)}}(this),"toolbar:clear_search":function(t){return function(){return t.highlighter.clear()}}(this),"toolbar:goto_search_result":function(t){return function(e,n,i){var r,o,s;return(o=t.last_search_results[n])?(i||$(document.body).track_rats("doc:search_doc_result:click",{index:n}),s=_.filter(t.last_search_results,function(t){return t.pageNum===o.pageNum}),r=_.indexOf(s,o),t.highlighter.select_result(o.pageNum,r)):void 0}}(this),"toolbar:search":function(t){return function(e,n){return $(document.body).track_rats("doc:search_doc:engage",{text:n}),$.post(t.document.toolbar.search_url,{query:n}).done(function(e){return t.last_search_results=e,t.toolbar.set_search_results(n,e)})}}(this)}),this.container.on("scribd:close_banner",function(t){return function(){return t.container.removeClass("store_promo_open")}}(this))},n.prototype.set_fullscreen=function(t){return this.fullscreen=t,this.render(),this.refresh_pages()},n.prototype.setup_fullscreen_btn=function(){var t;return t=function(t){return function(){var e,n;return e=t.container.find(".floating_fullscreen_btn"),n=0,t.container.find(".document_container, .document_details, .toolbar_drop, .header_spacer").each(function(t,e){return n+=e.scrollHeight}),window.scrollY+window.innerHeight>n?e.addClass("visually_hidden"):e.removeClass("visually_hidden")}}(this),$(window).on("scroll resize",t),t()},n.prototype.print_document=function(){return $(document.body).track_rats("doc:print_modal:show"),Scribd.Lightbox.open_react("print_document_lb",Scribd.R.Pdfs.Lightboxes.PrintLightbox({download_fn:function(t){return function(){return t.download_document("print modal")}}(this)}))},n.prototype.flag_document=function(t){return $(document.body).track_rats("doc:flag_button:click"),Scribd.with_login({initial_view:"login",login_header_text:I18n.t("pdfs.show.sign_in_to_flag_this_title")},function(){return function(){return Scribd.Lightbox.remote_open("lightbox_flag_document",t)}}(this))},n.prototype.download_document=function(t){return t&&$(document.body).track_rats("doc:download_button:click",{location:t}),Scribd.Lightbox.show_loading(),Scribd.download_actions.download(this.document.id,"read",t,function(t){return function(){return $.post(t.document.download_url).done(function(e){return $(document.body).track_rats("doc:download_modal:show"),e.props.download_url=t.document.download_url,Scribd.Lightbox.open_react("document_download_lb",Scribd.R.Pdfs.Lightboxes.DownloadLightbox(e.props))})}}(this))},n.prototype.setup_reading_progress=function(){var t,e,n,i;if(window.docManager)return t=null!=(e=window.location.hash.match(/\bpage=(\d+)/))?e[1]:void 0,t||(t=null!=(n=Scribd.current_doc)&&null!=(i=n.reading_progress)?i.offset:void 0),new Scribd.ReadingProgress.Pdf({scroll_node:DocumentManager.scrollParent||document.body,total_pages:this.opts.document.total_pages,doc_id:this.opts.document.id,container:this.container.find(".document_scroller")}),docManager.view_manager_deferred.then(function(e){return function(){var n;return n=window.location.hash.match(/\bfullscreen\b/),t&&+t>1&&!Scribd.ReadingProgress.PastPreviewLightbox.should_be_shown()&&docManager.gotoPage(+t),n?_.defer(function(){return e.set_fullscreen(!0)}):void 0}}(this)),$(window).on("scribd:external_reading_progress",function(){return function(t,e){return docManager.gotoPage(+e.offset+1)}}(this))},n.prototype.setup_embed_referral=function(){var t;return t=window.location.hash.search(/from_embed/)>0},n.prototype.setup_seo_roadblock=function(){var t;if(window.docManager&&Scribd.SeoShared.setup_assignment()&&!this.opts.view_restricted)return ouibounce(!1,{aggressive:!!(null!=(t=document.location.search)?t.match(/\bseo_roadblock\b/):void 0),callback:function(){return function(){var t,e,n;if(!Scribd.Lightbox.current_open)return n=Scribd.SeoShared.seo_variation(),e="seo_roadblock_lb_"+n,t=Scribd.Lightbox.open(e,Scribd.SeoLightbox)}}(this)})},n.prototype.setup_buy_manager=function(){var t;return t=Scribd.BuyDocManager.for_current_doc(),this.container.find(".primary_buy_btn").attr("href",t.buy_url)},n.prototype.is_english_locale=function(){return"en_US"===I18n.locale},n}()}).call(this),(Scribd.translations=Scribd.translations||[]).push({en_US:{pdfs:{show:{sign_in_to_flag_this_title:"Sign in to flag this title",page_page_is_not_shown:"Page %{page} is not shown in this preview.",pages_start_page_to_end_page_is_not_shown:"Pages <span class='missing_page_number notranslate'>%{start_page}</span> to <span class='missing_page_number notranslate'>%{end_page}</span> are not shown in this preview.",sign_up_to_print_document_after:"Sign up to print document after downloading",you_re_reading_a_preview:"You're Reading a Preview",unlock_full_access:"Unlock full access with a free trial.",free_with_a_30:"Free With a 30 Day Trial",download_with_free_trial:"Download With Free Trial",welcome_to_scribd:"Welcome to Scribd!",start_your_free_trial_and_access:"Start your free trial and access books, documents and more.",find_out_more:"Find out more",document_information:"Document Information",document_toolbar:"Document Toolbar"}}}});


/* app/views/pdfs/sidebar/_admin_panel.coffee @ 1500067086 */
(function(){Scribd.ReadPageAdmin=function(){function t(t){var e;this.container=$(t),e=!0,this.container.dispatch("click",{toggle_admin_btn:function(t){return function(){return t.container.toggleClass("open")}}(this)})}return t}()}).call(this);


/* app/views/pdfs/_ssi_recommendations.coffee @ 1500067086 */
(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Scribd.PdfsGroupedRecommendations=function(){function e(e){this.track_module=t(this.track_module,this),this.setup_tracking=t(this.setup_tracking,this),this.container=$(e),this.setup_tracking()}return e.prototype.setup_tracking=function(){var t,e,n,i,r;for(i=this.container.find("[data-track_opts]"),r=[],t=0,e=i.length;e>t;t++)n=i[t],r.push(this.track_module($(n)));return r},e.prototype.track_module=function(t){var e;return e=t.data("track_opts"),e.compilation_id?new Scribd.RecommendationTracking.Module(t,{compilation_id:e.compilation_id,module_id:e.module_id,widget_name:"sidebar",on_in_view:function(){return function(e){var n,i,r,o,s;for(o=t.find("[data-track_uuid]"),s=[],i=0,r=o.length;r>i;i++)n=o[i],n=$(n),s.push(function(t){return t.on("inview",function(){return function(){return Scribd.RecommendationTracking.track_obj_view(e.view_id,t.data("track_uuid"))}}(this))}(n));return s}}(this)}):void 0},e}(),Scribd.PdfsPaginatedRecommendations=function(){function t(t,e){this.module=e,this.container=$(t),this.setup_tracking(),Scribd.R.dispatch(this.container,{"sidebar:goto_page":function(t){return function(e,n){var i;return i=t.container.find(".documents_page"),i.removeClass("visible").eq(n-1).addClass("visible"),t.track_visible_sidebar()}}(this)})}return t.prototype.setup_tracking=function(){return this.module.compilation_id?new Scribd.RecommendationTracking.Module(this.container,{compilation_id:this.module.compilation_id,module_id:this.module.module_id,widget_name:"right sidebar",on_tracking:function(t){return function(e){t.tracking=e}}(this),on_in_view:function(t){return function(){return t.track_visible_sidebar()}}(this)}):void 0},t.prototype.track_visible_sidebar=function(){var t,e,n,i,r,o,s;if(this.tracking){for(s=this.container.find(".documents_page.visible"),r=s.find(".document_cell"),o=[],e=0,n=r.length;n>e;e++)t=r[e],t=$(t),t.is(".visibility_tracked")||(i=t.data("track_uuid"),Scribd.RecommendationTracking.track_obj_view(this.tracking.view_id,i),o.push(t.addClass("visibility_tracked")));return o}},t}(),Scribd.PdfsSsiRecommendations=function(){function t(t,e){this.opts=e,this.container=$(t),this.setup_sidebar(),Scribd.jsblock.done(function(t){return function(){return t.setup_footer_docs()}}(this))}return t.prototype.setup_sidebar=function(){var t;if(t=this.container.find(".sidebar_recommender"),t.length)switch(this.opts.template){case"default":return new Scribd.PdfsPaginatedRecommendations(t,this.opts.sidebar[0]);case"discovery":return new Scribd.PdfsGroupedRecommendations(t);default:return console.error("Unknown template: "+this.opts.template)}},t.prototype.setup_footer_docs=function(){var t,e,n,i,r,o,s;if(e=this.container.find(".footer_rec_docs"),n=this.container.closest(".document_columns_wrapper").find(".footer_recommended_docs_drop"),e.length)for(n.replaceWith(e),s=e.find("[data-recommender_init]"),r=0,o=s.length;o>r;r++)t=s[r],t=$(t),new Scribd.UI.Carousel(t,t.data("recommender_init"));return i=this.container.find(".footer_rec_docs_html"),i.length?n.replaceWith(i.data("html")):void 0},t}(),Scribd.PdfsSsiFooterRecommendations=function(){function t(t,e){this.opts=e}return t}()}).call(this),(Scribd.translations=Scribd.translations||[]).push({en_US:{pdfs:{ssi_recommendations:{related:"Related",by:"by",recommended_documents:"Recommended Documents"}}}});


/* app/views/pdfs/_toolbar.coffee @ 1500067086 */
(function(){var t,e,n,i,r,o,s,a,c,l,u,d,h,p={}.hasOwnProperty,f=[].slice;c=React.DOM,o=c.input,i=c.div,t=c.a,e=c.button,s=c.label,u=c.span,r=c.form,a=c.p,d=c.strong,l=c.section,n=Scribd.R.component_builder("Pdfs.Toolbar",{css_class:"autogen_class_views_pdfs_toolbar"}),h=React.PropTypes,n({propTypes:{fullscreen:h.bool.isRequired,current_zoom:h.number.isRequired,current_page:h.number.isRequired,highlight_callback:h.func,document:h.shape({is_downloadable:h.bool,total_pages:h.number.isRequired,toolbar:h.shape({sections:h.array,search_url:h.string}).isRequired}).isRequired},widget_css_classes:function(t){return classNames(t,{centered_tools:this.state.breakpoint_center_zoomers,narrow_tools:this.state.breakpoint_small_search||this.props.mobile,on_mobile:this.props.mobile})},getInitialState:function(){return{table_of_contents_open:!1,search_results_open:!1,search_results:void 0,search_active:!1,selected_search_result:void 0,search_input:"",changing_to_page:null}},update_width:function(){var t,e,n,i,r,o,s,a,c,l;if(t=this.props.fullscreen?[[1024,"breakpoint_center_zoomers"],[1024,"breakpoint_no_tools"],[1024,"breakpoint_no_pages"],[1024,"breakpoint_no_zoom"],[700,"breakpoint_no_search"],[0,"breakpoint_small_search"],[0,"breakpoint_no_toc"]]:this.props.mobile?[[1024,"breakpoint_center_zoomers"],[700,"breakpoint_no_tools"],[700,"breakpoint_no_zoom"],[550,"breakpoint_no_pages"],[400,"breakpoint_small_search"],[320,"breakpoint_no_toc"],[0,"breakpoint_no_search"]]:[[1024,"breakpoint_center_zoomers"],[700,"breakpoint_no_zoom"],[550,"breakpoint_no_pages"],[400,"breakpoint_no_tools"],[320,"breakpoint_small_search"],[0,"breakpoint_no_search"],[0,"breakpoint_no_toc"]],n=this.container(),l=n.outerWidth(),0!==l){for(c={},i=0,r=t.length;r>i;i++)s=t[i],e=s[0],o=s[1],c[o]=e>l;a=[];for(o in c)if(p.call(c,o)){if(this.state[o]!==c[o]){this.setState(c);break}a.push(void 0)}return a}},componentDidUpdate:function(){return this.update_width()},componentDidMount:function(){return $(window).on("resize orientationchange",_.debounce(this.update_width,150)),this.update_width(),$(document.body).on("click",function(t){return function(e){var n;return t.state.search_results_open&&(n=$(e.target).closest(t.refs.search_wrapper),n.length||t.setState({search_results_open:!1})),t.state.table_of_contents_open&&(n=$(e.target).closest(t.refs.toc_wrapper),!n.length)?t.setState({table_of_contents_open:!1}):void 0}}(this))},set_search_results:function(t,e){var n;if(t===this.state.last_search_query)return"function"==typeof(n=this.props).highlight_callback&&n.highlight_callback(t,e),e.length>0&&this.trigger("toolbar:goto_search_result",0,!0),this.setState({search_results:e,search_results_open:!0,search_active:!1,table_of_contents_open:!1,selected_search_result:e[0]&&0})},render:function(){return[i({className:"left_tools",children:this.render_left_tools()}),i({className:"center_tools",children:this.state.breakpoint_no_pages?void 0:this.render_center_tools()}),i({className:"right_tools",children:this.render_right_tools()})]},render_left_tools:function(){var n;return n=!this.state.breakpoint_no_search&&!this.state.breakpoint_no_toc&&this.props.document.toolbar.sections,[this.props.fullscreen?t({href:"/",className:"toolbar_scribd_logo"}):void 0,n?i({ref:"toc_wrapper",className:"toc_wrapper",children:[e({type:"button","data-tooltip":!0,"aria-label":I18n.t("pdfs.toolbar.table_of_contents"),className:classNames("toc_btn icon-ic_toc_list","toolbar_btn",{active:this.state.table_of_contents_open}),onClick:function(t){return function(){return $(document.body).track_rats("doc:table_of_contents_button:click",{action:t.state.table_of_contents_open?"hide":"show"}),t.setState({table_of_contents_open:!t.state.table_of_contents_open,search_results_open:!1})}}(this)}),this.state.table_of_contents_open?this.render_toc():void 0]}):void 0,!this.state.breakpoint_no_search&&this.props.document.toolbar.search_url?i({ref:"search_wrapper",className:"search_wrapper",children:[this.render_search(),this.state.search_results_open&&this.state.search_results?this.render_search_results():void 0]}):void 0]},render_center_tools:function(){var t,n,r;return t=_.string.numberFormat,r=this.props.current_zoom<=Scribd.PdfsShow.min_zoom,n=this.props.current_zoom>=Scribd.PdfsShow.max_zoom,[i({className:"toolbar_pager",children:[o({type:"number",className:"page_input","aria-label":I18n.t("pdfs.toolbar.go_to_page"),value:null!=this.state.changing_to_page?this.state.changing_to_page:this.props.current_page,onFocus:function(){return function(){return $(document.body).track_rats("doc:pager:click")}}(this),onBlur:function(t){return function(e){var n;if(null!=t.state.changing_to_page)return e.target.value.match(/\d/)&&(n=parseInt(e.target.value,10),n!==t.props.current_page&&t.trigger("toolbar:goto_page",n)),t.setState({changing_to_page:null})}}(this),onKeyDown:function(t){return function(e){if(t.state.changing_to_page)switch(e.keyCode){case 13:return t.trigger("toolbar:goto_page",parseInt(e.target.value,10)),t.setState({changing_to_page:null});case 27:return t.setState({changing_to_page:null})}}}(this),onChange:function(t){return function(e){return t.setState({changing_to_page:e.target.value})}}(this)}),u({className:"total_pages","aria-live":"polite","aria-atomic":"true",children:[u({className:"visually_hidden"},I18n.t("pdfs.toolbar.you_are_on_page_props_current_page",{props_current_page:this.props.current_page})),u({},I18n.t("pdfs.toolbar.of_numberformat_props_document_total_pages",{numberformat_props_document_total_pages:t(this.props.document.total_pages)}))]})]}),this.state.breakpoint_no_zoom?void 0:e({type:"button","data-tooltip":!0,"aria-label":I18n.t("pdfs.toolbar.zoom_in"),className:classNames("toolbar_btn zoom_btn icon-ic_zoom_in_default",{disabled:n}),onClick:function(t){return function(){return n?void 0:t.trigger("toolbar:zoom_in")}}(this)}),this.state.breakpoint_no_zoom?void 0:e({type:"button","data-tooltip":!0,"aria-label":I18n.t("pdfs.toolbar.zoom_out"),className:classNames("toolbar_btn zoom_btn icon-ic_zoom_out_default",{disabled:r}),onClick:function(t){return function(){return r?void 0:t.trigger("toolbar:zoom_out")}}(this)})]},render_right_tools:function(){var t;return t=!this.props.mobile&&!this.state.breakpoint_no_tools,[this.props.document.is_downloadable?this.props.fullscreen||this.props.mobile?this.common_button({className:classNames({slim:this.props.mobile}),onClick:function(t){return function(){return t.trigger("toolbar:download")}}(this)},I18n.t("pdfs.toolbar.download")):this.state.breakpoint_no_tools?void 0:e({type:"button","data-tooltip":!0,"aria-label":I18n.t("pdfs.toolbar.download"),className:"toolbar_btn icon-ic_download_with_line",onClick:function(t){return function(){return t.trigger("toolbar:download")}}(this)}):void 0,this.props.mobile?void 0:[this.props.document.is_downloadable&&!this.state.breakpoint_no_tools?e({"data-tooltip":!0,"aria-label":I18n.t("pdfs.toolbar.print"),className:"toolbar_btn icon-ic_print",onClick:function(t){return function(){return t.trigger("toolbar:print")}}(this)}):void 0,e({"data-tooltip":!0,"aria-label":I18n.t(this.props.fullscreen?"pdfs.toolbar.exit_fullscreen":"pdfs.toolbar.fullscreen"),type:"button",className:classNames("toolbar_btn",{"icon-ic_fullscreen_window":!this.props.fullscreen,"icon-ic_fullscreen_collapse":this.props.fullscreen}),onClick:function(t){return function(){return t.trigger("toolbar:fullscreen")}}(this)})]]},render_search:function(){return r({className:classNames("doc_search",{focused:this.state.search_focused,open:this.state.search_results_open,has_text:""!==this.state.search_input,narrow_search:this.state.breakpoint_small_search}),action:this.props.document.toolbar.search_url,onSubmit:function(t){return function(e){var n;return e.preventDefault(),n=$(t.refs.search_input).val(),n.match(/^\s*$/)?void t.setState({search_results_open:!1}):(n=n.match(/^\s*(.*?)\s*$/)[0],n!==t.state.last_search_query?(t.trigger("toolbar:search",n),t.setState({search_active:!0,search_results_open:!1,last_search_query:n,search_results:void 0,selected_search_result:void 0})):void 0)}}(this),children:[s({children:[this.state.search_active?i({className:"scribd_spinner","data-size":20}):void 0,u({className:"icon-ic_search search_icon","aria-hidden":"true",role:"presentation"}),o({type:"text",ref:"search_input","aria-label":I18n.t("pdfs.toolbar.search_document"),placeholder:I18n.t(this.state.breakpoint_small_search?"pdfs.toolbar.search":"pdfs.toolbar.search_document"),className:"search_input",value:this.state.search_input,onChange:function(t){return function(e){return t.setState({search_input:e.target.value})}}(this),onBlur:function(t){return function(e){return t.setState({search_focused:!1}),e.target.value!==t.state.last_search_query?t.trigger("toolbar:clear_search"):void 0}}(this),onFocus:function(t){return function(e){return t.setState({search_focused:!0}),$(document.body).track_rats("doc:search_doc:click"),t.state.search_active||!t.state.search_results||t.state.search_results_open||e.target.value!==t.state.last_search_query?void 0:t.setState({search_results_open:!0})}}(this),onKeyDown:function(t){return function(e){return 27===e.keyCode?t.state.search_results_open?t.setState({search_results_open:!1,last_search_query:null}):t.state.search_active&&t.state.last_search_query?t.setState({search_active:!1,last_search_query:null}):(t.trigger("toolbar:clear_search"),t.setState({search_input:""})):void 0}}(this)}),""!==this.state.search_input?e({type:"button",className:"search_close_icon icon-ic_close",onClick:function(t){return function(){return t.setState({search_input:"",search_active:!1,search_results_open:!1,last_search_query:null}),t.trigger("toolbar:clear_search")}}(this)}):void 0]})]})},render_search_results:function(){var e,n,r,o,s,a;return n=_.string.numberFormat,o=this.state.last_search_query,s=this.state.search_results.filter(function(t){return!!t.snippet}),e=s.length,r=function(t,e,i){return n(t)+" "+(1===t&&e||i)},a=1===e?I18n.t("pdfs.toolbar.showing_strong_1_strong_result_for_query"):I18n.t("pdfs.toolbar.showing_strong_num_results_strong_results_for_query",{num_results:e}),i({className:classNames("search_results results_popup",{empty:0===e}),children:[i({className:"results_header results_header",children:[u({dangerouslySetInnerHTML:{__html:a}}),u({}," \u2018"+o+"\u2019")]}),s.map(function(e){return function(r,s){return i({className:classNames("results_row available",{selected:s===e.state.selected_search_result}),children:[u({className:"result_page_number"},n(r.pageNum)),t.apply(null,[{href:"javascript:void(0)",onClick:function(t){return t.preventDefault(),e.trigger("toolbar:goto_search_result",s),e.setState({selected_search_result:s})}}].concat(f.call(e.render_snippet(r.snippet,o))))]})}}(this))]})},render_snippet:function(t,e){var n,i,r,o,s,c;if(!e)return t;for(r=RegExp(Scribd.escape_regexp(e),"ig"),i=[],o=0;s=r.exec(t);)a=s.index,n=s[0],a-o>0&&i.push(t.substring(o,a)),i.push(d({},n)),o=a+n.length;return(c=t.substring(o))&&i.push(c),i},render_toc:function(){var e,n;return n=_.string.numberFormat,e=null,i({className:"table_of_contents results_popup",children:[i({className:"toc_header results_header"},I18n.t("pdfs.toolbar.table_of_contents")),this.props.document.toolbar.sections.map(function(r){return function(o){return!e&&o.first_page>=r.props.current_page&&(e=o),i({className:classNames("toc_row results_row",{available:o.allowed,current:e===o}),title:o.allowed?void 0:I18n.t("pdfs.toolbar.this_section_not_available_in_preview"),children:[o.first_page?u({className:"result_page_number"},n(o.first_page)):void 0,o.allowed?t({href:"javascript:void(0)",onClick:function(t){return r.trigger("toolbar:goto_page",o.first_page,!0),r.setState({table_of_contents_open:!1}),t.preventDefault()}},o.title):u({className:"disabled_section"},o.title)]})}}(this))]})}})}).call(this),(Scribd.translations=Scribd.translations||[]).push({en_US:{pdfs:{toolbar:{table_of_contents:"Table of contents",of_numberformat_props_document_total_pages:"of %{numberformat_props_document_total_pages}",zoom_in:"Zoom in",zoom_out:"Zoom out",download:"Download",print:"Print",exit_fullscreen:"Exit fullscreen",fullscreen:"Fullscreen",search_document:"Search document",this_section_not_available_in_preview:"This section not available in preview",showing_strong_1_strong_result_for_query:"Showing <strong>1</strong> result for",showing_strong_num_results_strong_results_for_query:"Showing <strong>%{num_results}</strong> results for",edit_page:"Edit page",search:"Search",go_to_page:"Go to Page",you_are_on_page_props_current_page:"You are on page %{props_current_page}"}}}});


/* app/views/pdfs/upvote.coffee @ 1500067086 */
(function(){Scribd.Upvote=function(){function t(t,e){this.opts=e,this.container=$(t),$(document).on("scribd:upvote_popover:show",function(t){return function(){return t.show()}}(this)),$(document).on("scribd:upvote_popover:hide",function(t){return function(){return _.delay(function(){return t.hide()},2e3)}}(this)),$(document).on("scribd:rating_update, scribd:upvote_update",function(t){return function(){return _.delay(function(){return t.hide()},2e3)}}(this)),this.container.on("click",".close",function(t){return function(){return t.hide()}}(this)),this.container.one("click",".thumbs_up",function(t){return function(){return t.container.find(".thumbs_up .icon"),t.container.find(".thumbs_up").addClass("selected has_selection"),t.rate(5)}}(this)),this.container.one("click",".thumbs_down",function(t){return function(){return t.container.find(".thumbs_down .icon"),t.container.find(".thumbs_down").addClass("selected has_selection"),t.rate(1)}}(this))}return t.prototype.rate=function(t){return Scribd.with_login({initial_view:"join",track_location:"upvotes",join_header_text:I18n.t("shared.react.star_ratings.sign_up_to_rate_this_title")},function(e){return function(){return $.post(e.opts.ratings_path,{rated:t,source:4}),e.container.trigger("scribd:rating_update"),e.container.trigger("scribd:upvote_update:pdf_reader",{rating:t,doc_id:e.opts.doc_id}),_.delay(function(){return e.hide()},1e3)}}(this))},t.prototype.show=function(){return this.container.fadeIn(1e3)},t.prototype.hide=function(){return this.container.fadeOut(1e3)},t}()}).call(this);


/* app/views/shared/reading_progress/audio.coffee @ 1500067086 */
(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;Scribd.ReadingProgress.Audio=function(n){function i(e){this.opts=null!=e?e:{},this.update=t(this.update,this),this.player=Scribd.audiobook_player,this.previous_progress=this.get_progress(),i.__super__.constructor.call(this,this.opts),this._player_listen_events=["scribd:audiobook:play","scribd:audiobook:pause","scribd:audiobook:bookmark_location","scribd:audiobook:unload","scribd:audiobook:trackChanged","scribd:audiobook:next","scribd:audiobook:prev","scribd:audiobook:seekTo","scribd:audiobook:skipBack","scribd:audiobook:jumpTo"].join(" "),this.player.on(this._player_listen_events,this.update),this.update_interval=setInterval(this.update,this.post_ms)}return e(i,n),i.get_track_and_position=function(t){var e,n,i,r,o,s;if(n=Scribd.audiobook_player.current_chapters(),t>Scribd.audiobook_player.get_runtime())return{track_num:n.length-1,track_pos:n[n.length-1].duration};for(i=0,o=r=0,s=n.length;s>r;o=++r){if(e=n[o],!(i+e.duration<t))return{track_num:o,track_pos:t-i};i+=e.duration}},i.prototype.enabled=function(){return this.player?i.__super__.enabled.apply(this,arguments):!1},i.prototype.default_opts=function(){return _.extend(i.__super__.default_opts.apply(this,arguments),{preview_restricted:null,preview_threshold:null,player:null})},i.prototype.external_progress_notification_message=function(t){return I18n.t("shared.reading_progress.audio.we_ve_moved_you_to_where_you",{progress_device_name:t.device_name})},i.prototype.destroy=function(){return clearInterval(this.update_interval),this.player.off(this._player_listen_events,this.update)},i.prototype.update=function(){var t;if(this.enabled())return t=this.get_progress(),this.offset_type="ms",this.offset=t,this.percentage=t/this.player.get_runtime()*100,this.player.isPlaying()?(this.post(),this.track_for_payouts()):void 0},i.prototype.get_progress=function(t,e){var n,i,r,o,s,a;if(null==t&&(t=this.player.get_track_num()),null==e&&(e=this.player.get_track_pos()),i=null!=(a=this.player.current_chapters())?a.slice(0,t):void 0){for(s=0,r=0,o=i.length;o>r;r++)n=i[r],s+=n.duration;return s+=e,this.opts.preview_restricted?s=Math.min(s,this.opts.preview_threshold):s}},i.prototype.track_for_payouts=function(){var t;return t=this.get_progress(),$rat("abook_listen",[Scribd.current_doc.id,void 0,void 0,this.previous_progress,t]),$rat.root().flushEvents(),this.previous_progress=t},i}(Scribd.ReadingProgress.Base)}).call(this),(Scribd.translations=Scribd.translations||[]).push({en_US:{shared:{reading_progress:{audio:{we_ve_moved_you_to_where_you:"We've moved you to where you listened on your %{progress_device_name}"}}}}});


/* app/views/shared/reading_progress/epub.coffee @ 1500067086 */
(function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Scribd.ReadingProgress.Epub=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.update=function(t,e,n){return this.enabled()?(this.offset_type=t,this.offset=e,this.percentage=n,this.throttled_post_handler()):void 0},n.prototype.track=function(){},n}(Scribd.ReadingProgress.Base)}).call(this);


/* app/views/shared/reading_progress/past_preview_lightbox.coffee @ 1500067086 */
(function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Scribd.ReadingProgress.PastPreviewLightbox=function(e){function n(t,e){this.opts=null!=e?e:{},this.container=$(t),n.__super__.constructor.apply(this,arguments),this.show(),this.container.dispatch("click",{restart_preview:function(t){return function(){return null!=Scribd.read_page?Scribd.read_page.goto_progress({offset_type:"character",offset:0}):"undefined"!=typeof docManager&&null!==docManager&&docManager.gotoPage(1),t.close(!0)}}(this),get_full_title:function(t){return function(){return t.close(!0),"continue"}}(this)})}return t(n,e),n.should_be_shown=function(){var t;return t=!0,function(){var e,n;return t&&Scribd.logged_in?(t=!1,e=(null!=(n=Scribd.current_doc.reading_progress)?n.offset:void 0)||0,null!=Scribd.read_page?Scribd.read_page.epub.isProgressBeyondBounds(null,e):"undefined"!=typeof docManager&&null!==docManager?e+1>docManager._maximumAllowedPage:void 0):!1}}(),n.prototype.show=function(){var t;if(Scribd.ReadingProgress.PastPreviewLightbox.should_be_shown()&&this.opts.credit_restricted)return n.__super__.show.apply(this,arguments),t=Scribd.current_doc.is_comic?"comic":Scribd.current_doc.is_sheet_music?"sheet music":"book",this.container.track_rats("reading_progress:progress_moved:show",{doc_id:Scribd.current_doc.id,desired_offset:Scribd.current_doc.reading_progress.offset,offset_type:Scribd.current_doc.reading_progress.offset_type,document_type:t,is_preview:!0})},n.prototype.close=function(t){return null==t&&(t=!1),t?n.__super__.close.apply(this,arguments):void 0},n}(Scribd.StackedLightbox)}).call(this),(Scribd.translations=Scribd.translations||[]).push({en_US:{shared:{reading_progress:{past_preview_lightbox:{get_the_full_title_to_continue:"Get the full title to continue",get_the_full_title_to_continue_:"Get the full title to continue reading from where you left off, or restart the preview.",restart_preview:"Restart preview"}}}}});


/* app/views/shared/reading_progress/pdf.coffee @ 1500067086 */
(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;Scribd.ReadingProgress.Pdf=function(n){function i(e){this.opts=null!=e?e:{},this.update=t(this.update,this),i.__super__.constructor.call(this,this.opts),this.container=$(this.opts.container),this.doc_id=this.opts.doc_id,$(this.opts.scroll_node).off(this.events.scroll).on(this.events.scroll,this.update),this.container.on("scroll",function(t){return function(){return t.track_view()}}(this)),$(window).on("resize",function(t){return function(){return t.track_view()}}(this)),this.track_view(),setTimeout(function(t){return function(){return t.tracking_enabled=!0,t.track_view()}}(this),1e3),this.tick_track_later=_.debounce(function(t){return function(){return t.tick_track.apply(t,arguments)}}(this),1e3),setInterval(function(t){return function(){return t.current_event&&new Date-t.current_event.time>6e5?t.flush_current_event():void 0}}(this),5e3),$(window).on("beforeunload unload",function(t){return function(){return t.flush_current_event()}}(this))}return e(i,n),i.prototype.enabled=function(){return window.docManager&&this.opts.scroll_node?i.__super__.enabled.apply(this,arguments):!1},i.prototype.default_opts=function(){return _.extend(i.__super__.default_opts.apply(this,arguments),{scroll_node:null})},i.prototype.update=function(){var t;if(this.enabled())return t=window.docManager.currentPageNum()-1,this.offset_type="page",this.offset=t,this.percentage=t/this.opts.total_pages*100,this.throttled_post_handler()},i.prototype.flush_current_event=function(){return this.current_event?($rat("doc:view_end",{top_view_position:this.current_event.left,bottom_view_position:this.current_event.right,duration:(new Date-this.current_event.time)/1e3,doc_id:this.opts.doc_id}),this.current_event=null,"undefined"!=typeof $rat&&null!==$rat?$rat.root().flushEvents():void 0):void 0},i.prototype.tick_track=function(t,e){return this.flush_current_event(),this.current_event={left:t,right:e,time:+new Date},$rat("doc:view",{top_view_position:t,bottom_view_position:e,doc_id:this.opts.doc_id})},i.prototype.track_view=function(){var t,e,n,i,r,o;if(this.tracking_enabled&&this.container.is(":visible")&&(e=this.container[0],t=this.container.find(".document_container")[0],o=e.scrollTop,n=t.scrollHeight,i=Math.max(0,Math.min(1,o/n)),r=Math.max(0,Math.min(1,(o+e.offsetHeight)/n)),i!==r))return this.tick_track_later(Math.floor(100*i),Math.floor(100*r))},i}(Scribd.ReadingProgress.Base)}).call(this);
